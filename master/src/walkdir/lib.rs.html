<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source to the Rust file `/home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/walkdir-2.2.8/src/lib.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>lib.rs.html -- source</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../walkdir/index.html'><img src='../../rust-logo.png' alt='logo' width='100'></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">   1</span>
<span id="2">   2</span>
<span id="3">   3</span>
<span id="4">   4</span>
<span id="5">   5</span>
<span id="6">   6</span>
<span id="7">   7</span>
<span id="8">   8</span>
<span id="9">   9</span>
<span id="10">  10</span>
<span id="11">  11</span>
<span id="12">  12</span>
<span id="13">  13</span>
<span id="14">  14</span>
<span id="15">  15</span>
<span id="16">  16</span>
<span id="17">  17</span>
<span id="18">  18</span>
<span id="19">  19</span>
<span id="20">  20</span>
<span id="21">  21</span>
<span id="22">  22</span>
<span id="23">  23</span>
<span id="24">  24</span>
<span id="25">  25</span>
<span id="26">  26</span>
<span id="27">  27</span>
<span id="28">  28</span>
<span id="29">  29</span>
<span id="30">  30</span>
<span id="31">  31</span>
<span id="32">  32</span>
<span id="33">  33</span>
<span id="34">  34</span>
<span id="35">  35</span>
<span id="36">  36</span>
<span id="37">  37</span>
<span id="38">  38</span>
<span id="39">  39</span>
<span id="40">  40</span>
<span id="41">  41</span>
<span id="42">  42</span>
<span id="43">  43</span>
<span id="44">  44</span>
<span id="45">  45</span>
<span id="46">  46</span>
<span id="47">  47</span>
<span id="48">  48</span>
<span id="49">  49</span>
<span id="50">  50</span>
<span id="51">  51</span>
<span id="52">  52</span>
<span id="53">  53</span>
<span id="54">  54</span>
<span id="55">  55</span>
<span id="56">  56</span>
<span id="57">  57</span>
<span id="58">  58</span>
<span id="59">  59</span>
<span id="60">  60</span>
<span id="61">  61</span>
<span id="62">  62</span>
<span id="63">  63</span>
<span id="64">  64</span>
<span id="65">  65</span>
<span id="66">  66</span>
<span id="67">  67</span>
<span id="68">  68</span>
<span id="69">  69</span>
<span id="70">  70</span>
<span id="71">  71</span>
<span id="72">  72</span>
<span id="73">  73</span>
<span id="74">  74</span>
<span id="75">  75</span>
<span id="76">  76</span>
<span id="77">  77</span>
<span id="78">  78</span>
<span id="79">  79</span>
<span id="80">  80</span>
<span id="81">  81</span>
<span id="82">  82</span>
<span id="83">  83</span>
<span id="84">  84</span>
<span id="85">  85</span>
<span id="86">  86</span>
<span id="87">  87</span>
<span id="88">  88</span>
<span id="89">  89</span>
<span id="90">  90</span>
<span id="91">  91</span>
<span id="92">  92</span>
<span id="93">  93</span>
<span id="94">  94</span>
<span id="95">  95</span>
<span id="96">  96</span>
<span id="97">  97</span>
<span id="98">  98</span>
<span id="99">  99</span>
<span id="100"> 100</span>
<span id="101"> 101</span>
<span id="102"> 102</span>
<span id="103"> 103</span>
<span id="104"> 104</span>
<span id="105"> 105</span>
<span id="106"> 106</span>
<span id="107"> 107</span>
<span id="108"> 108</span>
<span id="109"> 109</span>
<span id="110"> 110</span>
<span id="111"> 111</span>
<span id="112"> 112</span>
<span id="113"> 113</span>
<span id="114"> 114</span>
<span id="115"> 115</span>
<span id="116"> 116</span>
<span id="117"> 117</span>
<span id="118"> 118</span>
<span id="119"> 119</span>
<span id="120"> 120</span>
<span id="121"> 121</span>
<span id="122"> 122</span>
<span id="123"> 123</span>
<span id="124"> 124</span>
<span id="125"> 125</span>
<span id="126"> 126</span>
<span id="127"> 127</span>
<span id="128"> 128</span>
<span id="129"> 129</span>
<span id="130"> 130</span>
<span id="131"> 131</span>
<span id="132"> 132</span>
<span id="133"> 133</span>
<span id="134"> 134</span>
<span id="135"> 135</span>
<span id="136"> 136</span>
<span id="137"> 137</span>
<span id="138"> 138</span>
<span id="139"> 139</span>
<span id="140"> 140</span>
<span id="141"> 141</span>
<span id="142"> 142</span>
<span id="143"> 143</span>
<span id="144"> 144</span>
<span id="145"> 145</span>
<span id="146"> 146</span>
<span id="147"> 147</span>
<span id="148"> 148</span>
<span id="149"> 149</span>
<span id="150"> 150</span>
<span id="151"> 151</span>
<span id="152"> 152</span>
<span id="153"> 153</span>
<span id="154"> 154</span>
<span id="155"> 155</span>
<span id="156"> 156</span>
<span id="157"> 157</span>
<span id="158"> 158</span>
<span id="159"> 159</span>
<span id="160"> 160</span>
<span id="161"> 161</span>
<span id="162"> 162</span>
<span id="163"> 163</span>
<span id="164"> 164</span>
<span id="165"> 165</span>
<span id="166"> 166</span>
<span id="167"> 167</span>
<span id="168"> 168</span>
<span id="169"> 169</span>
<span id="170"> 170</span>
<span id="171"> 171</span>
<span id="172"> 172</span>
<span id="173"> 173</span>
<span id="174"> 174</span>
<span id="175"> 175</span>
<span id="176"> 176</span>
<span id="177"> 177</span>
<span id="178"> 178</span>
<span id="179"> 179</span>
<span id="180"> 180</span>
<span id="181"> 181</span>
<span id="182"> 182</span>
<span id="183"> 183</span>
<span id="184"> 184</span>
<span id="185"> 185</span>
<span id="186"> 186</span>
<span id="187"> 187</span>
<span id="188"> 188</span>
<span id="189"> 189</span>
<span id="190"> 190</span>
<span id="191"> 191</span>
<span id="192"> 192</span>
<span id="193"> 193</span>
<span id="194"> 194</span>
<span id="195"> 195</span>
<span id="196"> 196</span>
<span id="197"> 197</span>
<span id="198"> 198</span>
<span id="199"> 199</span>
<span id="200"> 200</span>
<span id="201"> 201</span>
<span id="202"> 202</span>
<span id="203"> 203</span>
<span id="204"> 204</span>
<span id="205"> 205</span>
<span id="206"> 206</span>
<span id="207"> 207</span>
<span id="208"> 208</span>
<span id="209"> 209</span>
<span id="210"> 210</span>
<span id="211"> 211</span>
<span id="212"> 212</span>
<span id="213"> 213</span>
<span id="214"> 214</span>
<span id="215"> 215</span>
<span id="216"> 216</span>
<span id="217"> 217</span>
<span id="218"> 218</span>
<span id="219"> 219</span>
<span id="220"> 220</span>
<span id="221"> 221</span>
<span id="222"> 222</span>
<span id="223"> 223</span>
<span id="224"> 224</span>
<span id="225"> 225</span>
<span id="226"> 226</span>
<span id="227"> 227</span>
<span id="228"> 228</span>
<span id="229"> 229</span>
<span id="230"> 230</span>
<span id="231"> 231</span>
<span id="232"> 232</span>
<span id="233"> 233</span>
<span id="234"> 234</span>
<span id="235"> 235</span>
<span id="236"> 236</span>
<span id="237"> 237</span>
<span id="238"> 238</span>
<span id="239"> 239</span>
<span id="240"> 240</span>
<span id="241"> 241</span>
<span id="242"> 242</span>
<span id="243"> 243</span>
<span id="244"> 244</span>
<span id="245"> 245</span>
<span id="246"> 246</span>
<span id="247"> 247</span>
<span id="248"> 248</span>
<span id="249"> 249</span>
<span id="250"> 250</span>
<span id="251"> 251</span>
<span id="252"> 252</span>
<span id="253"> 253</span>
<span id="254"> 254</span>
<span id="255"> 255</span>
<span id="256"> 256</span>
<span id="257"> 257</span>
<span id="258"> 258</span>
<span id="259"> 259</span>
<span id="260"> 260</span>
<span id="261"> 261</span>
<span id="262"> 262</span>
<span id="263"> 263</span>
<span id="264"> 264</span>
<span id="265"> 265</span>
<span id="266"> 266</span>
<span id="267"> 267</span>
<span id="268"> 268</span>
<span id="269"> 269</span>
<span id="270"> 270</span>
<span id="271"> 271</span>
<span id="272"> 272</span>
<span id="273"> 273</span>
<span id="274"> 274</span>
<span id="275"> 275</span>
<span id="276"> 276</span>
<span id="277"> 277</span>
<span id="278"> 278</span>
<span id="279"> 279</span>
<span id="280"> 280</span>
<span id="281"> 281</span>
<span id="282"> 282</span>
<span id="283"> 283</span>
<span id="284"> 284</span>
<span id="285"> 285</span>
<span id="286"> 286</span>
<span id="287"> 287</span>
<span id="288"> 288</span>
<span id="289"> 289</span>
<span id="290"> 290</span>
<span id="291"> 291</span>
<span id="292"> 292</span>
<span id="293"> 293</span>
<span id="294"> 294</span>
<span id="295"> 295</span>
<span id="296"> 296</span>
<span id="297"> 297</span>
<span id="298"> 298</span>
<span id="299"> 299</span>
<span id="300"> 300</span>
<span id="301"> 301</span>
<span id="302"> 302</span>
<span id="303"> 303</span>
<span id="304"> 304</span>
<span id="305"> 305</span>
<span id="306"> 306</span>
<span id="307"> 307</span>
<span id="308"> 308</span>
<span id="309"> 309</span>
<span id="310"> 310</span>
<span id="311"> 311</span>
<span id="312"> 312</span>
<span id="313"> 313</span>
<span id="314"> 314</span>
<span id="315"> 315</span>
<span id="316"> 316</span>
<span id="317"> 317</span>
<span id="318"> 318</span>
<span id="319"> 319</span>
<span id="320"> 320</span>
<span id="321"> 321</span>
<span id="322"> 322</span>
<span id="323"> 323</span>
<span id="324"> 324</span>
<span id="325"> 325</span>
<span id="326"> 326</span>
<span id="327"> 327</span>
<span id="328"> 328</span>
<span id="329"> 329</span>
<span id="330"> 330</span>
<span id="331"> 331</span>
<span id="332"> 332</span>
<span id="333"> 333</span>
<span id="334"> 334</span>
<span id="335"> 335</span>
<span id="336"> 336</span>
<span id="337"> 337</span>
<span id="338"> 338</span>
<span id="339"> 339</span>
<span id="340"> 340</span>
<span id="341"> 341</span>
<span id="342"> 342</span>
<span id="343"> 343</span>
<span id="344"> 344</span>
<span id="345"> 345</span>
<span id="346"> 346</span>
<span id="347"> 347</span>
<span id="348"> 348</span>
<span id="349"> 349</span>
<span id="350"> 350</span>
<span id="351"> 351</span>
<span id="352"> 352</span>
<span id="353"> 353</span>
<span id="354"> 354</span>
<span id="355"> 355</span>
<span id="356"> 356</span>
<span id="357"> 357</span>
<span id="358"> 358</span>
<span id="359"> 359</span>
<span id="360"> 360</span>
<span id="361"> 361</span>
<span id="362"> 362</span>
<span id="363"> 363</span>
<span id="364"> 364</span>
<span id="365"> 365</span>
<span id="366"> 366</span>
<span id="367"> 367</span>
<span id="368"> 368</span>
<span id="369"> 369</span>
<span id="370"> 370</span>
<span id="371"> 371</span>
<span id="372"> 372</span>
<span id="373"> 373</span>
<span id="374"> 374</span>
<span id="375"> 375</span>
<span id="376"> 376</span>
<span id="377"> 377</span>
<span id="378"> 378</span>
<span id="379"> 379</span>
<span id="380"> 380</span>
<span id="381"> 381</span>
<span id="382"> 382</span>
<span id="383"> 383</span>
<span id="384"> 384</span>
<span id="385"> 385</span>
<span id="386"> 386</span>
<span id="387"> 387</span>
<span id="388"> 388</span>
<span id="389"> 389</span>
<span id="390"> 390</span>
<span id="391"> 391</span>
<span id="392"> 392</span>
<span id="393"> 393</span>
<span id="394"> 394</span>
<span id="395"> 395</span>
<span id="396"> 396</span>
<span id="397"> 397</span>
<span id="398"> 398</span>
<span id="399"> 399</span>
<span id="400"> 400</span>
<span id="401"> 401</span>
<span id="402"> 402</span>
<span id="403"> 403</span>
<span id="404"> 404</span>
<span id="405"> 405</span>
<span id="406"> 406</span>
<span id="407"> 407</span>
<span id="408"> 408</span>
<span id="409"> 409</span>
<span id="410"> 410</span>
<span id="411"> 411</span>
<span id="412"> 412</span>
<span id="413"> 413</span>
<span id="414"> 414</span>
<span id="415"> 415</span>
<span id="416"> 416</span>
<span id="417"> 417</span>
<span id="418"> 418</span>
<span id="419"> 419</span>
<span id="420"> 420</span>
<span id="421"> 421</span>
<span id="422"> 422</span>
<span id="423"> 423</span>
<span id="424"> 424</span>
<span id="425"> 425</span>
<span id="426"> 426</span>
<span id="427"> 427</span>
<span id="428"> 428</span>
<span id="429"> 429</span>
<span id="430"> 430</span>
<span id="431"> 431</span>
<span id="432"> 432</span>
<span id="433"> 433</span>
<span id="434"> 434</span>
<span id="435"> 435</span>
<span id="436"> 436</span>
<span id="437"> 437</span>
<span id="438"> 438</span>
<span id="439"> 439</span>
<span id="440"> 440</span>
<span id="441"> 441</span>
<span id="442"> 442</span>
<span id="443"> 443</span>
<span id="444"> 444</span>
<span id="445"> 445</span>
<span id="446"> 446</span>
<span id="447"> 447</span>
<span id="448"> 448</span>
<span id="449"> 449</span>
<span id="450"> 450</span>
<span id="451"> 451</span>
<span id="452"> 452</span>
<span id="453"> 453</span>
<span id="454"> 454</span>
<span id="455"> 455</span>
<span id="456"> 456</span>
<span id="457"> 457</span>
<span id="458"> 458</span>
<span id="459"> 459</span>
<span id="460"> 460</span>
<span id="461"> 461</span>
<span id="462"> 462</span>
<span id="463"> 463</span>
<span id="464"> 464</span>
<span id="465"> 465</span>
<span id="466"> 466</span>
<span id="467"> 467</span>
<span id="468"> 468</span>
<span id="469"> 469</span>
<span id="470"> 470</span>
<span id="471"> 471</span>
<span id="472"> 472</span>
<span id="473"> 473</span>
<span id="474"> 474</span>
<span id="475"> 475</span>
<span id="476"> 476</span>
<span id="477"> 477</span>
<span id="478"> 478</span>
<span id="479"> 479</span>
<span id="480"> 480</span>
<span id="481"> 481</span>
<span id="482"> 482</span>
<span id="483"> 483</span>
<span id="484"> 484</span>
<span id="485"> 485</span>
<span id="486"> 486</span>
<span id="487"> 487</span>
<span id="488"> 488</span>
<span id="489"> 489</span>
<span id="490"> 490</span>
<span id="491"> 491</span>
<span id="492"> 492</span>
<span id="493"> 493</span>
<span id="494"> 494</span>
<span id="495"> 495</span>
<span id="496"> 496</span>
<span id="497"> 497</span>
<span id="498"> 498</span>
<span id="499"> 499</span>
<span id="500"> 500</span>
<span id="501"> 501</span>
<span id="502"> 502</span>
<span id="503"> 503</span>
<span id="504"> 504</span>
<span id="505"> 505</span>
<span id="506"> 506</span>
<span id="507"> 507</span>
<span id="508"> 508</span>
<span id="509"> 509</span>
<span id="510"> 510</span>
<span id="511"> 511</span>
<span id="512"> 512</span>
<span id="513"> 513</span>
<span id="514"> 514</span>
<span id="515"> 515</span>
<span id="516"> 516</span>
<span id="517"> 517</span>
<span id="518"> 518</span>
<span id="519"> 519</span>
<span id="520"> 520</span>
<span id="521"> 521</span>
<span id="522"> 522</span>
<span id="523"> 523</span>
<span id="524"> 524</span>
<span id="525"> 525</span>
<span id="526"> 526</span>
<span id="527"> 527</span>
<span id="528"> 528</span>
<span id="529"> 529</span>
<span id="530"> 530</span>
<span id="531"> 531</span>
<span id="532"> 532</span>
<span id="533"> 533</span>
<span id="534"> 534</span>
<span id="535"> 535</span>
<span id="536"> 536</span>
<span id="537"> 537</span>
<span id="538"> 538</span>
<span id="539"> 539</span>
<span id="540"> 540</span>
<span id="541"> 541</span>
<span id="542"> 542</span>
<span id="543"> 543</span>
<span id="544"> 544</span>
<span id="545"> 545</span>
<span id="546"> 546</span>
<span id="547"> 547</span>
<span id="548"> 548</span>
<span id="549"> 549</span>
<span id="550"> 550</span>
<span id="551"> 551</span>
<span id="552"> 552</span>
<span id="553"> 553</span>
<span id="554"> 554</span>
<span id="555"> 555</span>
<span id="556"> 556</span>
<span id="557"> 557</span>
<span id="558"> 558</span>
<span id="559"> 559</span>
<span id="560"> 560</span>
<span id="561"> 561</span>
<span id="562"> 562</span>
<span id="563"> 563</span>
<span id="564"> 564</span>
<span id="565"> 565</span>
<span id="566"> 566</span>
<span id="567"> 567</span>
<span id="568"> 568</span>
<span id="569"> 569</span>
<span id="570"> 570</span>
<span id="571"> 571</span>
<span id="572"> 572</span>
<span id="573"> 573</span>
<span id="574"> 574</span>
<span id="575"> 575</span>
<span id="576"> 576</span>
<span id="577"> 577</span>
<span id="578"> 578</span>
<span id="579"> 579</span>
<span id="580"> 580</span>
<span id="581"> 581</span>
<span id="582"> 582</span>
<span id="583"> 583</span>
<span id="584"> 584</span>
<span id="585"> 585</span>
<span id="586"> 586</span>
<span id="587"> 587</span>
<span id="588"> 588</span>
<span id="589"> 589</span>
<span id="590"> 590</span>
<span id="591"> 591</span>
<span id="592"> 592</span>
<span id="593"> 593</span>
<span id="594"> 594</span>
<span id="595"> 595</span>
<span id="596"> 596</span>
<span id="597"> 597</span>
<span id="598"> 598</span>
<span id="599"> 599</span>
<span id="600"> 600</span>
<span id="601"> 601</span>
<span id="602"> 602</span>
<span id="603"> 603</span>
<span id="604"> 604</span>
<span id="605"> 605</span>
<span id="606"> 606</span>
<span id="607"> 607</span>
<span id="608"> 608</span>
<span id="609"> 609</span>
<span id="610"> 610</span>
<span id="611"> 611</span>
<span id="612"> 612</span>
<span id="613"> 613</span>
<span id="614"> 614</span>
<span id="615"> 615</span>
<span id="616"> 616</span>
<span id="617"> 617</span>
<span id="618"> 618</span>
<span id="619"> 619</span>
<span id="620"> 620</span>
<span id="621"> 621</span>
<span id="622"> 622</span>
<span id="623"> 623</span>
<span id="624"> 624</span>
<span id="625"> 625</span>
<span id="626"> 626</span>
<span id="627"> 627</span>
<span id="628"> 628</span>
<span id="629"> 629</span>
<span id="630"> 630</span>
<span id="631"> 631</span>
<span id="632"> 632</span>
<span id="633"> 633</span>
<span id="634"> 634</span>
<span id="635"> 635</span>
<span id="636"> 636</span>
<span id="637"> 637</span>
<span id="638"> 638</span>
<span id="639"> 639</span>
<span id="640"> 640</span>
<span id="641"> 641</span>
<span id="642"> 642</span>
<span id="643"> 643</span>
<span id="644"> 644</span>
<span id="645"> 645</span>
<span id="646"> 646</span>
<span id="647"> 647</span>
<span id="648"> 648</span>
<span id="649"> 649</span>
<span id="650"> 650</span>
<span id="651"> 651</span>
<span id="652"> 652</span>
<span id="653"> 653</span>
<span id="654"> 654</span>
<span id="655"> 655</span>
<span id="656"> 656</span>
<span id="657"> 657</span>
<span id="658"> 658</span>
<span id="659"> 659</span>
<span id="660"> 660</span>
<span id="661"> 661</span>
<span id="662"> 662</span>
<span id="663"> 663</span>
<span id="664"> 664</span>
<span id="665"> 665</span>
<span id="666"> 666</span>
<span id="667"> 667</span>
<span id="668"> 668</span>
<span id="669"> 669</span>
<span id="670"> 670</span>
<span id="671"> 671</span>
<span id="672"> 672</span>
<span id="673"> 673</span>
<span id="674"> 674</span>
<span id="675"> 675</span>
<span id="676"> 676</span>
<span id="677"> 677</span>
<span id="678"> 678</span>
<span id="679"> 679</span>
<span id="680"> 680</span>
<span id="681"> 681</span>
<span id="682"> 682</span>
<span id="683"> 683</span>
<span id="684"> 684</span>
<span id="685"> 685</span>
<span id="686"> 686</span>
<span id="687"> 687</span>
<span id="688"> 688</span>
<span id="689"> 689</span>
<span id="690"> 690</span>
<span id="691"> 691</span>
<span id="692"> 692</span>
<span id="693"> 693</span>
<span id="694"> 694</span>
<span id="695"> 695</span>
<span id="696"> 696</span>
<span id="697"> 697</span>
<span id="698"> 698</span>
<span id="699"> 699</span>
<span id="700"> 700</span>
<span id="701"> 701</span>
<span id="702"> 702</span>
<span id="703"> 703</span>
<span id="704"> 704</span>
<span id="705"> 705</span>
<span id="706"> 706</span>
<span id="707"> 707</span>
<span id="708"> 708</span>
<span id="709"> 709</span>
<span id="710"> 710</span>
<span id="711"> 711</span>
<span id="712"> 712</span>
<span id="713"> 713</span>
<span id="714"> 714</span>
<span id="715"> 715</span>
<span id="716"> 716</span>
<span id="717"> 717</span>
<span id="718"> 718</span>
<span id="719"> 719</span>
<span id="720"> 720</span>
<span id="721"> 721</span>
<span id="722"> 722</span>
<span id="723"> 723</span>
<span id="724"> 724</span>
<span id="725"> 725</span>
<span id="726"> 726</span>
<span id="727"> 727</span>
<span id="728"> 728</span>
<span id="729"> 729</span>
<span id="730"> 730</span>
<span id="731"> 731</span>
<span id="732"> 732</span>
<span id="733"> 733</span>
<span id="734"> 734</span>
<span id="735"> 735</span>
<span id="736"> 736</span>
<span id="737"> 737</span>
<span id="738"> 738</span>
<span id="739"> 739</span>
<span id="740"> 740</span>
<span id="741"> 741</span>
<span id="742"> 742</span>
<span id="743"> 743</span>
<span id="744"> 744</span>
<span id="745"> 745</span>
<span id="746"> 746</span>
<span id="747"> 747</span>
<span id="748"> 748</span>
<span id="749"> 749</span>
<span id="750"> 750</span>
<span id="751"> 751</span>
<span id="752"> 752</span>
<span id="753"> 753</span>
<span id="754"> 754</span>
<span id="755"> 755</span>
<span id="756"> 756</span>
<span id="757"> 757</span>
<span id="758"> 758</span>
<span id="759"> 759</span>
<span id="760"> 760</span>
<span id="761"> 761</span>
<span id="762"> 762</span>
<span id="763"> 763</span>
<span id="764"> 764</span>
<span id="765"> 765</span>
<span id="766"> 766</span>
<span id="767"> 767</span>
<span id="768"> 768</span>
<span id="769"> 769</span>
<span id="770"> 770</span>
<span id="771"> 771</span>
<span id="772"> 772</span>
<span id="773"> 773</span>
<span id="774"> 774</span>
<span id="775"> 775</span>
<span id="776"> 776</span>
<span id="777"> 777</span>
<span id="778"> 778</span>
<span id="779"> 779</span>
<span id="780"> 780</span>
<span id="781"> 781</span>
<span id="782"> 782</span>
<span id="783"> 783</span>
<span id="784"> 784</span>
<span id="785"> 785</span>
<span id="786"> 786</span>
<span id="787"> 787</span>
<span id="788"> 788</span>
<span id="789"> 789</span>
<span id="790"> 790</span>
<span id="791"> 791</span>
<span id="792"> 792</span>
<span id="793"> 793</span>
<span id="794"> 794</span>
<span id="795"> 795</span>
<span id="796"> 796</span>
<span id="797"> 797</span>
<span id="798"> 798</span>
<span id="799"> 799</span>
<span id="800"> 800</span>
<span id="801"> 801</span>
<span id="802"> 802</span>
<span id="803"> 803</span>
<span id="804"> 804</span>
<span id="805"> 805</span>
<span id="806"> 806</span>
<span id="807"> 807</span>
<span id="808"> 808</span>
<span id="809"> 809</span>
<span id="810"> 810</span>
<span id="811"> 811</span>
<span id="812"> 812</span>
<span id="813"> 813</span>
<span id="814"> 814</span>
<span id="815"> 815</span>
<span id="816"> 816</span>
<span id="817"> 817</span>
<span id="818"> 818</span>
<span id="819"> 819</span>
<span id="820"> 820</span>
<span id="821"> 821</span>
<span id="822"> 822</span>
<span id="823"> 823</span>
<span id="824"> 824</span>
<span id="825"> 825</span>
<span id="826"> 826</span>
<span id="827"> 827</span>
<span id="828"> 828</span>
<span id="829"> 829</span>
<span id="830"> 830</span>
<span id="831"> 831</span>
<span id="832"> 832</span>
<span id="833"> 833</span>
<span id="834"> 834</span>
<span id="835"> 835</span>
<span id="836"> 836</span>
<span id="837"> 837</span>
<span id="838"> 838</span>
<span id="839"> 839</span>
<span id="840"> 840</span>
<span id="841"> 841</span>
<span id="842"> 842</span>
<span id="843"> 843</span>
<span id="844"> 844</span>
<span id="845"> 845</span>
<span id="846"> 846</span>
<span id="847"> 847</span>
<span id="848"> 848</span>
<span id="849"> 849</span>
<span id="850"> 850</span>
<span id="851"> 851</span>
<span id="852"> 852</span>
<span id="853"> 853</span>
<span id="854"> 854</span>
<span id="855"> 855</span>
<span id="856"> 856</span>
<span id="857"> 857</span>
<span id="858"> 858</span>
<span id="859"> 859</span>
<span id="860"> 860</span>
<span id="861"> 861</span>
<span id="862"> 862</span>
<span id="863"> 863</span>
<span id="864"> 864</span>
<span id="865"> 865</span>
<span id="866"> 866</span>
<span id="867"> 867</span>
<span id="868"> 868</span>
<span id="869"> 869</span>
<span id="870"> 870</span>
<span id="871"> 871</span>
<span id="872"> 872</span>
<span id="873"> 873</span>
<span id="874"> 874</span>
<span id="875"> 875</span>
<span id="876"> 876</span>
<span id="877"> 877</span>
<span id="878"> 878</span>
<span id="879"> 879</span>
<span id="880"> 880</span>
<span id="881"> 881</span>
<span id="882"> 882</span>
<span id="883"> 883</span>
<span id="884"> 884</span>
<span id="885"> 885</span>
<span id="886"> 886</span>
<span id="887"> 887</span>
<span id="888"> 888</span>
<span id="889"> 889</span>
<span id="890"> 890</span>
<span id="891"> 891</span>
<span id="892"> 892</span>
<span id="893"> 893</span>
<span id="894"> 894</span>
<span id="895"> 895</span>
<span id="896"> 896</span>
<span id="897"> 897</span>
<span id="898"> 898</span>
<span id="899"> 899</span>
<span id="900"> 900</span>
<span id="901"> 901</span>
<span id="902"> 902</span>
<span id="903"> 903</span>
<span id="904"> 904</span>
<span id="905"> 905</span>
<span id="906"> 906</span>
<span id="907"> 907</span>
<span id="908"> 908</span>
<span id="909"> 909</span>
<span id="910"> 910</span>
<span id="911"> 911</span>
<span id="912"> 912</span>
<span id="913"> 913</span>
<span id="914"> 914</span>
<span id="915"> 915</span>
<span id="916"> 916</span>
<span id="917"> 917</span>
<span id="918"> 918</span>
<span id="919"> 919</span>
<span id="920"> 920</span>
<span id="921"> 921</span>
<span id="922"> 922</span>
<span id="923"> 923</span>
<span id="924"> 924</span>
<span id="925"> 925</span>
<span id="926"> 926</span>
<span id="927"> 927</span>
<span id="928"> 928</span>
<span id="929"> 929</span>
<span id="930"> 930</span>
<span id="931"> 931</span>
<span id="932"> 932</span>
<span id="933"> 933</span>
<span id="934"> 934</span>
<span id="935"> 935</span>
<span id="936"> 936</span>
<span id="937"> 937</span>
<span id="938"> 938</span>
<span id="939"> 939</span>
<span id="940"> 940</span>
<span id="941"> 941</span>
<span id="942"> 942</span>
<span id="943"> 943</span>
<span id="944"> 944</span>
<span id="945"> 945</span>
<span id="946"> 946</span>
<span id="947"> 947</span>
<span id="948"> 948</span>
<span id="949"> 949</span>
<span id="950"> 950</span>
<span id="951"> 951</span>
<span id="952"> 952</span>
<span id="953"> 953</span>
<span id="954"> 954</span>
<span id="955"> 955</span>
<span id="956"> 956</span>
<span id="957"> 957</span>
<span id="958"> 958</span>
<span id="959"> 959</span>
<span id="960"> 960</span>
<span id="961"> 961</span>
<span id="962"> 962</span>
<span id="963"> 963</span>
<span id="964"> 964</span>
<span id="965"> 965</span>
<span id="966"> 966</span>
<span id="967"> 967</span>
<span id="968"> 968</span>
<span id="969"> 969</span>
<span id="970"> 970</span>
<span id="971"> 971</span>
<span id="972"> 972</span>
<span id="973"> 973</span>
<span id="974"> 974</span>
<span id="975"> 975</span>
<span id="976"> 976</span>
<span id="977"> 977</span>
<span id="978"> 978</span>
<span id="979"> 979</span>
<span id="980"> 980</span>
<span id="981"> 981</span>
<span id="982"> 982</span>
<span id="983"> 983</span>
<span id="984"> 984</span>
<span id="985"> 985</span>
<span id="986"> 986</span>
<span id="987"> 987</span>
<span id="988"> 988</span>
<span id="989"> 989</span>
<span id="990"> 990</span>
<span id="991"> 991</span>
<span id="992"> 992</span>
<span id="993"> 993</span>
<span id="994"> 994</span>
<span id="995"> 995</span>
<span id="996"> 996</span>
<span id="997"> 997</span>
<span id="998"> 998</span>
<span id="999"> 999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
<span id="1511">1511</span>
<span id="1512">1512</span>
<span id="1513">1513</span>
<span id="1514">1514</span>
<span id="1515">1515</span>
<span id="1516">1516</span>
<span id="1517">1517</span>
<span id="1518">1518</span>
<span id="1519">1519</span>
<span id="1520">1520</span>
<span id="1521">1521</span>
<span id="1522">1522</span>
<span id="1523">1523</span>
<span id="1524">1524</span>
<span id="1525">1525</span>
<span id="1526">1526</span>
<span id="1527">1527</span>
<span id="1528">1528</span>
<span id="1529">1529</span>
<span id="1530">1530</span>
<span id="1531">1531</span>
<span id="1532">1532</span>
<span id="1533">1533</span>
<span id="1534">1534</span>
<span id="1535">1535</span>
<span id="1536">1536</span>
<span id="1537">1537</span>
<span id="1538">1538</span>
<span id="1539">1539</span>
<span id="1540">1540</span>
<span id="1541">1541</span>
<span id="1542">1542</span>
<span id="1543">1543</span>
<span id="1544">1544</span>
<span id="1545">1545</span>
<span id="1546">1546</span>
<span id="1547">1547</span>
<span id="1548">1548</span>
<span id="1549">1549</span>
<span id="1550">1550</span>
<span id="1551">1551</span>
<span id="1552">1552</span>
<span id="1553">1553</span>
<span id="1554">1554</span>
<span id="1555">1555</span>
<span id="1556">1556</span>
<span id="1557">1557</span>
<span id="1558">1558</span>
<span id="1559">1559</span>
<span id="1560">1560</span>
<span id="1561">1561</span>
<span id="1562">1562</span>
<span id="1563">1563</span>
<span id="1564">1564</span>
<span id="1565">1565</span>
<span id="1566">1566</span>
<span id="1567">1567</span>
<span id="1568">1568</span>
<span id="1569">1569</span>
<span id="1570">1570</span>
<span id="1571">1571</span>
<span id="1572">1572</span>
<span id="1573">1573</span>
<span id="1574">1574</span>
<span id="1575">1575</span>
<span id="1576">1576</span>
<span id="1577">1577</span>
<span id="1578">1578</span>
<span id="1579">1579</span>
<span id="1580">1580</span>
<span id="1581">1581</span>
<span id="1582">1582</span>
<span id="1583">1583</span>
<span id="1584">1584</span>
<span id="1585">1585</span>
<span id="1586">1586</span>
<span id="1587">1587</span>
<span id="1588">1588</span>
<span id="1589">1589</span>
<span id="1590">1590</span>
<span id="1591">1591</span>
<span id="1592">1592</span>
<span id="1593">1593</span>
<span id="1594">1594</span>
<span id="1595">1595</span>
<span id="1596">1596</span>
<span id="1597">1597</span>
<span id="1598">1598</span>
<span id="1599">1599</span>
<span id="1600">1600</span>
<span id="1601">1601</span>
<span id="1602">1602</span>
<span id="1603">1603</span>
<span id="1604">1604</span>
<span id="1605">1605</span>
<span id="1606">1606</span>
<span id="1607">1607</span>
<span id="1608">1608</span>
<span id="1609">1609</span>
<span id="1610">1610</span>
<span id="1611">1611</span>
<span id="1612">1612</span>
<span id="1613">1613</span>
<span id="1614">1614</span>
<span id="1615">1615</span>
<span id="1616">1616</span>
<span id="1617">1617</span>
<span id="1618">1618</span>
<span id="1619">1619</span>
<span id="1620">1620</span>
<span id="1621">1621</span>
<span id="1622">1622</span>
<span id="1623">1623</span>
<span id="1624">1624</span>
<span id="1625">1625</span>
<span id="1626">1626</span>
<span id="1627">1627</span>
<span id="1628">1628</span>
<span id="1629">1629</span>
<span id="1630">1630</span>
<span id="1631">1631</span>
<span id="1632">1632</span>
<span id="1633">1633</span>
<span id="1634">1634</span>
<span id="1635">1635</span>
<span id="1636">1636</span>
<span id="1637">1637</span>
<span id="1638">1638</span>
<span id="1639">1639</span>
<span id="1640">1640</span>
<span id="1641">1641</span>
<span id="1642">1642</span>
<span id="1643">1643</span>
<span id="1644">1644</span>
<span id="1645">1645</span>
<span id="1646">1646</span>
<span id="1647">1647</span>
<span id="1648">1648</span>
<span id="1649">1649</span>
<span id="1650">1650</span>
<span id="1651">1651</span>
<span id="1652">1652</span>
<span id="1653">1653</span>
<span id="1654">1654</span>
<span id="1655">1655</span>
<span id="1656">1656</span>
<span id="1657">1657</span>
<span id="1658">1658</span>
<span id="1659">1659</span>
<span id="1660">1660</span>
<span id="1661">1661</span>
<span id="1662">1662</span>
<span id="1663">1663</span>
<span id="1664">1664</span>
<span id="1665">1665</span>
<span id="1666">1666</span>
<span id="1667">1667</span>
<span id="1668">1668</span>
<span id="1669">1669</span>
<span id="1670">1670</span>
<span id="1671">1671</span>
<span id="1672">1672</span>
<span id="1673">1673</span>
<span id="1674">1674</span>
<span id="1675">1675</span>
<span id="1676">1676</span>
<span id="1677">1677</span>
<span id="1678">1678</span>
<span id="1679">1679</span>
<span id="1680">1680</span>
<span id="1681">1681</span>
<span id="1682">1682</span>
<span id="1683">1683</span>
<span id="1684">1684</span>
<span id="1685">1685</span>
<span id="1686">1686</span>
<span id="1687">1687</span>
<span id="1688">1688</span>
<span id="1689">1689</span>
<span id="1690">1690</span>
<span id="1691">1691</span>
<span id="1692">1692</span>
<span id="1693">1693</span>
<span id="1694">1694</span>
<span id="1695">1695</span>
<span id="1696">1696</span>
<span id="1697">1697</span>
<span id="1698">1698</span>
<span id="1699">1699</span>
<span id="1700">1700</span>
<span id="1701">1701</span>
<span id="1702">1702</span>
<span id="1703">1703</span>
<span id="1704">1704</span>
<span id="1705">1705</span>
<span id="1706">1706</span>
<span id="1707">1707</span>
<span id="1708">1708</span>
<span id="1709">1709</span>
<span id="1710">1710</span>
<span id="1711">1711</span>
<span id="1712">1712</span>
<span id="1713">1713</span>
<span id="1714">1714</span>
<span id="1715">1715</span>
<span id="1716">1716</span>
<span id="1717">1717</span>
<span id="1718">1718</span>
<span id="1719">1719</span>
<span id="1720">1720</span>
<span id="1721">1721</span>
<span id="1722">1722</span>
<span id="1723">1723</span>
<span id="1724">1724</span>
<span id="1725">1725</span>
</pre><div class="example-wrap"><pre class="rust ">
<span class="doccomment">/*!
Crate `walkdir` provides an efficient and cross platform implementation
of recursive directory traversal. Several options are exposed to control
iteration, such as whether to follow symbolic links (default off), limit the
maximum number of simultaneous open file descriptors and the ability to
efficiently skip descending into directories.

To use this crate, add `walkdir` as a dependency to your project&#39;s
`Cargo.toml`:

```toml
[dependencies]
walkdir = &quot;2&quot;
```

# From the top

The [`WalkDir`] type builds iterators. The [`DirEntry`] type describes values
yielded by the iterator. Finally, the [`Error`] type is a small wrapper around
[`std::io::Error`] with additional information, such as if a loop was detected
while following symbolic links (not enabled by default).

[`WalkDir`]: struct.WalkDir.html
[`DirEntry`]: struct.DirEntry.html
[`Error`]: struct.Error.html
[`std::io::Error`]: https://doc.rust-lang.org/stable/std/io/struct.Error.html

# Example

The following code recursively iterates over the directory given and prints
the path for each entry:

```no_run
use walkdir::WalkDir;
# use walkdir::Error;

# fn try_main() -&gt; Result&lt;(), Error&gt; {
for entry in WalkDir::new(&quot;foo&quot;) {
    println!(&quot;{}&quot;, entry?.path().display());
}
# Ok(())
# }
```

Or, if you&#39;d like to iterate over all entries and ignore any errors that
may arise, use [`filter_map`]. (e.g., This code below will silently skip
directories that the owner of the running process does not have permission to
access.)

```no_run
use walkdir::WalkDir;

for entry in WalkDir::new(&quot;foo&quot;).into_iter().filter_map(|e| e.ok()) {
    println!(&quot;{}&quot;, entry.path().display());
}
```

[`filter_map`]: https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html#method.filter_map

# Example: follow symbolic links

The same code as above, except [`follow_links`] is enabled:

```no_run
use walkdir::WalkDir;
# use walkdir::Error;

# fn try_main() -&gt; Result&lt;(), Error&gt; {
for entry in WalkDir::new(&quot;foo&quot;).follow_links(true) {
    println!(&quot;{}&quot;, entry?.path().display());
}
# Ok(())
# }
```

[`follow_links`]: struct.WalkDir.html#method.follow_links

# Example: skip hidden files and directories on unix

This uses the [`filter_entry`] iterator adapter to avoid yielding hidden files
and directories efficiently (i.e. without recursing into hidden directories):

```no_run
use walkdir::{DirEntry, WalkDir};
# use walkdir::Error;

fn is_hidden(entry: &amp;DirEntry) -&gt; bool {
    entry.file_name()
         .to_str()
         .map(|s| s.starts_with(&quot;.&quot;))
         .unwrap_or(false)
}

# fn try_main() -&gt; Result&lt;(), Error&gt; {
let walker = WalkDir::new(&quot;foo&quot;).into_iter();
for entry in walker.filter_entry(|e| !is_hidden(e)) {
    println!(&quot;{}&quot;, entry?.path().display());
}
# Ok(())
# }
```

[`filter_entry`]: struct.IntoIter.html#method.filter_entry
*/</span>

<span class="attribute">#![<span class="ident">deny</span>(<span class="ident">missing_docs</span>)]</span>
<span class="attribute">#![<span class="ident">allow</span>(<span class="ident">bare_trait_objects</span>)]</span>

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">quickcheck</span>;
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">rand</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">same_file</span>;
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">winapi</span>;
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">winapi_util</span>;
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">doc_comment</span>;

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="macro">doctest</span><span class="macro">!</span>(<span class="string">&quot;../README.md&quot;</span>);

<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">cmp</span>::{<span class="ident">Ordering</span>, <span class="ident">min</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">error</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">fmt</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">fs</span>::{<span class="self">self</span>, <span class="ident">FileType</span>, <span class="ident">ReadDir</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">io</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::<span class="ident">OsStr</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">path</span>::{<span class="ident">Path</span>, <span class="ident">PathBuf</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">result</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">vec</span>;

<span class="kw">use</span> <span class="ident">same_file</span>::<span class="ident">Handle</span>;

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
<span class="kw">pub</span> <span class="kw">use</span> <span class="ident">unix</span>::<span class="ident">DirEntryExt</span>;

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="kw">mod</span> <span class="ident">tests</span>;
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
<span class="kw">mod</span> <span class="ident">unix</span>;

<span class="doccomment">/// Like try, but for iterators that return [`Option&lt;Result&lt;_, _&gt;&gt;`].</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`Option&lt;Result&lt;_, _&gt;&gt;`]: https://doc.rust-lang.org/stable/std/option/enum.Option.html</span>
<span class="macro">macro_rules</span><span class="macro">!</span> <span class="ident">itry</span> {
    (<span class="macro-nonterminal">$</span><span class="macro-nonterminal">e</span>:<span class="ident">expr</span>) <span class="op">=&gt;</span> {
        <span class="kw">match</span> <span class="macro-nonterminal">$</span><span class="macro-nonterminal">e</span> {
            <span class="prelude-val">Ok</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>,
            <span class="prelude-val">Err</span>(<span class="ident">err</span>) <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Err</span>(<span class="ident">From</span>::<span class="ident">from</span>(<span class="ident">err</span>))),
        }
    }
}

<span class="doccomment">/// A result type for walkdir operations.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that this result type embeds the error type in this crate. This</span>
<span class="doccomment">/// is only useful if you care about the additional information provided by</span>
<span class="doccomment">/// the error (such as the path associated with the error or whether a loop</span>
<span class="doccomment">/// was dectected). If you want things to Just Work, then you can use</span>
<span class="doccomment">/// [`io::Result`] instead since the error type in this package will</span>
<span class="doccomment">/// automatically convert to an [`io::Result`] when using the [`try!`] macro.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`io::Result`]: https://doc.rust-lang.org/stable/std/io/type.Result.html</span>
<span class="doccomment">/// [`try!`]: https://doc.rust-lang.org/stable/std/macro.try.html</span>
<span class="kw">pub</span> <span class="kw">type</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span> <span class="op">=</span> ::<span class="ident">std</span>::<span class="ident">result</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">T</span>, <span class="ident">Error</span><span class="op">&gt;</span>;

<span class="doccomment">/// A builder to create an iterator for recursively walking a directory.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Results are returned in depth first fashion, with directories yielded</span>
<span class="doccomment">/// before their contents. If [`contents_first`] is true, contents are yielded</span>
<span class="doccomment">/// before their directories. The order is unspecified but if [`sort_by`] is</span>
<span class="doccomment">/// given, directory entries are sorted according to this function. Directory</span>
<span class="doccomment">/// entries `.` and `..` are always omitted.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// If an error occurs at any point during iteration, then it is returned in</span>
<span class="doccomment">/// place of its corresponding directory entry and iteration continues as</span>
<span class="doccomment">/// normal. If an error occurs while opening a directory for reading, then it</span>
<span class="doccomment">/// is not descended into (but the error is still yielded by the iterator).</span>
<span class="doccomment">/// Iteration may be stopped at any time. When the iterator is destroyed, all</span>
<span class="doccomment">/// resources associated with it are freed.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`contents_first`]: struct.WalkDir.html#method.contents_first</span>
<span class="doccomment">/// [`sort_by`]: struct.WalkDir.html#method.sort_by</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Usage</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This type implements [`IntoIterator`] so that it may be used as the subject</span>
<span class="doccomment">/// of a `for` loop. You may need to call [`into_iter`] explicitly if you want</span>
<span class="doccomment">/// to use iterator adapters such as [`filter_entry`].</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Idiomatic use of this type should use method chaining to set desired</span>
<span class="doccomment">/// options. For example, this only shows entries with a depth of `1`, `2` or</span>
<span class="doccomment">/// `3` (relative to `foo`):</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```no_run</span>
<span class="doccomment">/// use walkdir::WalkDir;</span>
<span class="doccomment">/// # use walkdir::Error;</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # fn try_main() -&gt; Result&lt;(), Error&gt; {</span>
<span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;).min_depth(1).max_depth(3) {</span>
<span class="doccomment">///     println!(&quot;{}&quot;, entry?.path().display());</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// # Ok(())</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`IntoIterator`]: https://doc.rust-lang.org/stable/std/iter/trait.IntoIterator.html</span>
<span class="doccomment">/// [`into_iter`]: https://doc.rust-lang.org/nightly/core/iter/trait.IntoIterator.html#tymethod.into_iter</span>
<span class="doccomment">/// [`filter_entry`]: struct.IntoIter.html#method.filter_entry</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that the iterator by default includes the top-most directory. Since</span>
<span class="doccomment">/// this is the only directory yielded with depth `0`, it is easy to ignore it</span>
<span class="doccomment">/// with the [`min_depth`] setting:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```no_run</span>
<span class="doccomment">/// use walkdir::WalkDir;</span>
<span class="doccomment">/// # use walkdir::Error;</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # fn try_main() -&gt; Result&lt;(), Error&gt; {</span>
<span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;).min_depth(1) {</span>
<span class="doccomment">///     println!(&quot;{}&quot;, entry?.path().display());</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// # Ok(())</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`min_depth`]: struct.WalkDir.html#method.min_depth</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This will only return descendents of the `foo` directory and not `foo`</span>
<span class="doccomment">/// itself.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Loops</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This iterator (like most/all recursive directory iterators) assumes that</span>
<span class="doccomment">/// no loops can be made with *hard* links on your file system. In particular,</span>
<span class="doccomment">/// this would require creating a hard link to a directory such that it creates</span>
<span class="doccomment">/// a loop. On most platforms, this operation is illegal.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that when following symbolic/soft links, loops are detected and an</span>
<span class="doccomment">/// error is reported.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WalkDir</span> {
    <span class="ident">opts</span>: <span class="ident">WalkDirOptions</span>,
    <span class="ident">root</span>: <span class="ident">PathBuf</span>,
}

<span class="kw">struct</span> <span class="ident">WalkDirOptions</span> {
    <span class="ident">follow_links</span>: <span class="ident">bool</span>,
    <span class="ident">max_open</span>: <span class="ident">usize</span>,
    <span class="ident">min_depth</span>: <span class="ident">usize</span>,
    <span class="ident">max_depth</span>: <span class="ident">usize</span>,
    <span class="ident">sorter</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span>
        <span class="ident">FnMut</span>(<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>,<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">Ordering</span> <span class="op">+</span> <span class="ident">Send</span> <span class="op">+</span> <span class="ident">Sync</span> <span class="op">+</span> <span class="lifetime">&#39;static</span>
    <span class="op">&gt;&gt;</span>,
    <span class="ident">contents_first</span>: <span class="ident">bool</span>,
    <span class="ident">same_file_system</span>: <span class="ident">bool</span>,
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">WalkDirOptions</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span>) <span class="op">-&gt;</span> <span class="ident">result</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">fmt</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">sorter_str</span> <span class="op">=</span> <span class="kw">if</span> <span class="self">self</span>.<span class="ident">sorter</span>.<span class="ident">is_some</span>() {
            <span class="comment">// FnMut isn&#39;t `Debug`</span>
            <span class="string">&quot;Some(...)&quot;</span>
        } <span class="kw">else</span> {
            <span class="string">&quot;None&quot;</span>
        };
        <span class="ident">f</span>.<span class="ident">debug_struct</span>(<span class="string">&quot;WalkDirOptions&quot;</span>)
            .<span class="ident">field</span>(<span class="string">&quot;follow_links&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">follow_links</span>)
            .<span class="ident">field</span>(<span class="string">&quot;max_open&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">max_open</span>)
            .<span class="ident">field</span>(<span class="string">&quot;min_depth&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">min_depth</span>)
            .<span class="ident">field</span>(<span class="string">&quot;max_depth&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">max_depth</span>)
            .<span class="ident">field</span>(<span class="string">&quot;sorter&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">sorter_str</span>)
            .<span class="ident">field</span>(<span class="string">&quot;contents_first&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">contents_first</span>)
            .<span class="ident">field</span>(<span class="string">&quot;same_file_system&quot;</span>, <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">same_file_system</span>)
            .<span class="ident">finish</span>()
    }
}

<span class="kw">impl</span> <span class="ident">WalkDir</span> {
    <span class="doccomment">/// Create a builder for a recursive directory iterator starting at the</span>
    <span class="doccomment">/// file path `root`. If `root` is a directory, then it is the first item</span>
    <span class="doccomment">/// yielded by the iterator. If `root` is a file, then it is the first</span>
    <span class="doccomment">/// and only item yielded by the iterator. If `root` is a symlink, then it</span>
    <span class="doccomment">/// is always followed for the purposes of directory traversal. (A root</span>
    <span class="doccomment">/// `DirEntry` still obeys its documentation with respect to symlinks and</span>
    <span class="doccomment">/// the `follow_links` setting.)</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span><span class="op">&lt;</span><span class="ident">P</span>: <span class="ident">AsRef</span><span class="op">&lt;</span><span class="ident">Path</span><span class="op">&gt;&gt;</span>(<span class="ident">root</span>: <span class="ident">P</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="ident">WalkDir</span> {
            <span class="ident">opts</span>: <span class="ident">WalkDirOptions</span> {
                <span class="ident">follow_links</span>: <span class="bool-val">false</span>,
                <span class="ident">max_open</span>: <span class="number">10</span>,
                <span class="ident">min_depth</span>: <span class="number">0</span>,
                <span class="ident">max_depth</span>: ::<span class="ident">std</span>::<span class="ident">usize</span>::<span class="ident">MAX</span>,
                <span class="ident">sorter</span>: <span class="prelude-val">None</span>,
                <span class="ident">contents_first</span>: <span class="bool-val">false</span>,
                <span class="ident">same_file_system</span>: <span class="bool-val">false</span>,
            },
            <span class="ident">root</span>: <span class="ident">root</span>.<span class="ident">as_ref</span>().<span class="ident">to_path_buf</span>(),
        }
    }

    <span class="doccomment">/// Set the minimum depth of entries yielded by the iterator.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The smallest depth is `0` and always corresponds to the path given</span>
    <span class="doccomment">/// to the `new` function on this type. Its direct descendents have depth</span>
    <span class="doccomment">/// `1`, and their descendents have depth `2`, and so on.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">min_depth</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">depth</span>: <span class="ident">usize</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span> <span class="op">=</span> <span class="ident">depth</span>;
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span> <span class="op">&gt;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span> {
            <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span>;
        }
        <span class="self">self</span>
    }

    <span class="doccomment">/// Set the maximum depth of entries yield by the iterator.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The smallest depth is `0` and always corresponds to the path given</span>
    <span class="doccomment">/// to the `new` function on this type. Its direct descendents have depth</span>
    <span class="doccomment">/// `1`, and their descendents have depth `2`, and so on.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that this will not simply filter the entries of the iterator, but</span>
    <span class="doccomment">/// it will actually avoid descending into directories when the depth is</span>
    <span class="doccomment">/// exceeded.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">max_depth</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">depth</span>: <span class="ident">usize</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span> <span class="op">=</span> <span class="ident">depth</span>;
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span> <span class="op">&lt;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span> {
            <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span>;
        }
        <span class="self">self</span>
    }

    <span class="doccomment">/// Follow symbolic links. By default, this is disabled.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When `yes` is `true`, symbolic links are followed as if they were</span>
    <span class="doccomment">/// normal directories and files. If a symbolic link is broken or is</span>
    <span class="doccomment">/// involved in a loop, an error is yielded.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When enabled, the yielded [`DirEntry`] values represent the target of</span>
    <span class="doccomment">/// the link while the path corresponds to the link. See the [`DirEntry`]</span>
    <span class="doccomment">/// type for more details.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`DirEntry`]: struct.DirEntry.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">follow_links</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">yes</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">follow_links</span> <span class="op">=</span> <span class="ident">yes</span>;
        <span class="self">self</span>
    }

    <span class="doccomment">/// Set the maximum number of simultaneously open file descriptors used</span>
    <span class="doccomment">/// by the iterator.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// `n` must be greater than or equal to `1`. If `n` is `0`, then it is set</span>
    <span class="doccomment">/// to `1` automatically. If this is not set, then it defaults to some</span>
    <span class="doccomment">/// reasonably low number.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This setting has no impact on the results yielded by the iterator</span>
    <span class="doccomment">/// (even when `n` is `1`). Instead, this setting represents a trade off</span>
    <span class="doccomment">/// between scarce resources (file descriptors) and memory. Namely, when</span>
    <span class="doccomment">/// the maximum number of file descriptors is reached and a new directory</span>
    <span class="doccomment">/// needs to be opened to continue iteration, then a previous directory</span>
    <span class="doccomment">/// handle is closed and has its unyielded entries stored in memory. In</span>
    <span class="doccomment">/// practice, this is a satisfying trade off because it scales with respect</span>
    <span class="doccomment">/// to the *depth* of your file tree. Therefore, low values (even `1`) are</span>
    <span class="doccomment">/// acceptable.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that this value does not impact the number of system calls made by</span>
    <span class="doccomment">/// an exhausted iterator.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Platform behavior</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// On Windows, if `follow_links` is enabled, then this limit is not</span>
    <span class="doccomment">/// respected. In particular, the maximum number of file descriptors opened</span>
    <span class="doccomment">/// is proportional to the depth of the directory tree traversed.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">max_open</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="kw-2">mut</span> <span class="ident">n</span>: <span class="ident">usize</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="kw">if</span> <span class="ident">n</span> <span class="op">==</span> <span class="number">0</span> {
            <span class="ident">n</span> <span class="op">=</span> <span class="number">1</span>;
        }
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_open</span> <span class="op">=</span> <span class="ident">n</span>;
        <span class="self">self</span>
    }

    <span class="doccomment">/// Set a function for sorting directory entries.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If a compare function is set, the resulting iterator will return all</span>
    <span class="doccomment">/// paths in sorted order. The compare function will be called to compare</span>
    <span class="doccomment">/// entries from the same directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```rust,no-run</span>
    <span class="doccomment">/// use std::cmp;</span>
    <span class="doccomment">/// use std::ffi::OsString;</span>
    <span class="doccomment">/// use walkdir::WalkDir;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// WalkDir::new(&quot;foo&quot;).sort_by(|a,b| a.file_name().cmp(b.file_name()));</span>
    <span class="doccomment">/// ```</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sort_by</span><span class="op">&lt;</span><span class="ident">F</span><span class="op">&gt;</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">cmp</span>: <span class="ident">F</span>) <span class="op">-&gt;</span> <span class="self">Self</span>
    <span class="kw">where</span> <span class="ident">F</span>: <span class="ident">FnMut</span>(<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>, <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">Ordering</span> <span class="op">+</span> <span class="ident">Send</span> <span class="op">+</span> <span class="ident">Sync</span> <span class="op">+</span> <span class="lifetime">&#39;static</span>
    {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">sorter</span> <span class="op">=</span> <span class="prelude-val">Some</span>(<span class="ident">Box</span>::<span class="ident">new</span>(<span class="ident">cmp</span>));
        <span class="self">self</span>
    }

    <span class="doccomment">/// Yield a directory&#39;s contents before the directory itself. By default,</span>
    <span class="doccomment">/// this is disabled.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When `yes` is `false` (as is the default), the directory is yielded</span>
    <span class="doccomment">/// before its contents are read. This is useful when, e.g. you want to</span>
    <span class="doccomment">/// skip processing of some directories.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When `yes` is `true`, the iterator yields the contents of a directory</span>
    <span class="doccomment">/// before yielding the directory itself. This is useful when, e.g. you</span>
    <span class="doccomment">/// want to recursively delete a directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Example</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Assume the following directory tree:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```text</span>
    <span class="doccomment">/// foo/</span>
    <span class="doccomment">///   abc/</span>
    <span class="doccomment">///     qrs</span>
    <span class="doccomment">///     tuv</span>
    <span class="doccomment">///   def/</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// With contents_first disabled (the default), the following code visits</span>
    <span class="doccomment">/// the directory tree in depth-first order:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::WalkDir;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;) {</span>
    <span class="doccomment">///     let entry = entry.unwrap();</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// // foo</span>
    <span class="doccomment">/// // foo/abc</span>
    <span class="doccomment">/// // foo/abc/qrs</span>
    <span class="doccomment">/// // foo/abc/tuv</span>
    <span class="doccomment">/// // foo/def</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// With contents_first enabled:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::WalkDir;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;).contents_first(true) {</span>
    <span class="doccomment">///     let entry = entry.unwrap();</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// // foo/abc/qrs</span>
    <span class="doccomment">/// // foo/abc/tuv</span>
    <span class="doccomment">/// // foo/abc</span>
    <span class="doccomment">/// // foo/def</span>
    <span class="doccomment">/// // foo</span>
    <span class="doccomment">/// ```</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">contents_first</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">yes</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">contents_first</span> <span class="op">=</span> <span class="ident">yes</span>;
        <span class="self">self</span>
    }

    <span class="doccomment">/// Do not cross file system boundaries.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When this option is enabled, directory traversal will not descend into</span>
    <span class="doccomment">/// directories that are on a different file system from the root path.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Currently, this option is only supported on Unix and Windows. If this</span>
    <span class="doccomment">/// option is used on an unsupported platform, then directory traversal</span>
    <span class="doccomment">/// will immediately return an error and will not yield any entries.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">same_file_system</span>(<span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">yes</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">same_file_system</span> <span class="op">=</span> <span class="ident">yes</span>;
        <span class="self">self</span>
    }
}

<span class="kw">impl</span> <span class="ident">IntoIterator</span> <span class="kw">for</span> <span class="ident">WalkDir</span> {
    <span class="kw">type</span> <span class="ident">Item</span> <span class="op">=</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span>;
    <span class="kw">type</span> <span class="ident">IntoIter</span> <span class="op">=</span> <span class="ident">IntoIter</span>;

    <span class="kw">fn</span> <span class="ident">into_iter</span>(<span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">IntoIter</span> {
        <span class="ident">IntoIter</span> {
            <span class="ident">opts</span>: <span class="self">self</span>.<span class="ident">opts</span>,
            <span class="ident">start</span>: <span class="prelude-val">Some</span>(<span class="self">self</span>.<span class="ident">root</span>),
            <span class="ident">stack_list</span>: <span class="macro">vec</span><span class="macro">!</span>[],
            <span class="ident">stack_path</span>: <span class="macro">vec</span><span class="macro">!</span>[],
            <span class="ident">oldest_opened</span>: <span class="number">0</span>,
            <span class="ident">depth</span>: <span class="number">0</span>,
            <span class="ident">deferred_dirs</span>: <span class="macro">vec</span><span class="macro">!</span>[],
            <span class="ident">root_device</span>: <span class="prelude-val">None</span>,
        }
    }
}

<span class="doccomment">/// An iterator for recursively descending into a directory.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// A value with this type must be constructed with the [`WalkDir`] type, which</span>
<span class="doccomment">/// uses a builder pattern to set options such as min/max depth, max open file</span>
<span class="doccomment">/// descriptors and whether the iterator should follow symbolic links. After</span>
<span class="doccomment">/// constructing a `WalkDir`, call [`.into_iter()`] at the end of the chain.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The order of elements yielded by this iterator is unspecified.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`WalkDir`]: struct.WalkDir.html</span>
<span class="doccomment">/// [`.into_iter()`]: struct.WalkDir.html#into_iter.v</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">IntoIter</span> {
    <span class="doccomment">/// Options specified in the builder. Depths, max fds, etc.</span>
    <span class="ident">opts</span>: <span class="ident">WalkDirOptions</span>,
    <span class="doccomment">/// The start path.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This is only `Some(...)` at the beginning. After the first iteration,</span>
    <span class="doccomment">/// this is always `None`.</span>
    <span class="ident">start</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">PathBuf</span><span class="op">&gt;</span>,
    <span class="doccomment">/// A stack of open (up to max fd) or closed handles to directories.</span>
    <span class="doccomment">/// An open handle is a plain [`fs::ReadDir`] while a closed handle is</span>
    <span class="doccomment">/// a `Vec&lt;fs::DirEntry&gt;` corresponding to the as-of-yet consumed entries.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`fs::ReadDir`]: https://doc.rust-lang.org/stable/std/fs/struct.ReadDir.html</span>
    <span class="ident">stack_list</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">DirList</span><span class="op">&gt;</span>,
    <span class="doccomment">/// A stack of file paths.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This is *only* used when [`follow_links`] is enabled. In all other</span>
    <span class="doccomment">/// cases this stack is empty.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`follow_links`]: struct.WalkDir.html#method.follow_links</span>
    <span class="ident">stack_path</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">Ancestor</span><span class="op">&gt;</span>,
    <span class="doccomment">/// An index into `stack_list` that points to the oldest open directory</span>
    <span class="doccomment">/// handle. If the maximum fd limit is reached and a new directory needs to</span>
    <span class="doccomment">/// be read, the handle at this index is closed before the new directory is</span>
    <span class="doccomment">/// opened.</span>
    <span class="ident">oldest_opened</span>: <span class="ident">usize</span>,
    <span class="doccomment">/// The current depth of iteration (the length of the stack at the</span>
    <span class="doccomment">/// beginning of each iteration).</span>
    <span class="ident">depth</span>: <span class="ident">usize</span>,
    <span class="doccomment">/// A list of DirEntries corresponding to directories, that are</span>
    <span class="doccomment">/// yielded after their contents has been fully yielded. This is only</span>
    <span class="doccomment">/// used when `contents_first` is enabled.</span>
    <span class="ident">deferred_dirs</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span>,
    <span class="doccomment">/// The device of the root file path when the first call to `next` was</span>
    <span class="doccomment">/// made.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If the `same_file_system` option isn&#39;t enabled, then this is always</span>
    <span class="doccomment">/// `None`. Conversely, if it is enabled, this is always `Some(...)` after</span>
    <span class="doccomment">/// handling the root path.</span>
    <span class="ident">root_device</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span>,
}

<span class="doccomment">/// An ancestor is an item in the directory tree traversed by walkdir, and is</span>
<span class="doccomment">/// used to check for loops in the tree when traversing symlinks.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">struct</span> <span class="ident">Ancestor</span> {
    <span class="doccomment">/// The path of this ancestor.</span>
    <span class="ident">path</span>: <span class="ident">PathBuf</span>,
    <span class="doccomment">/// An open file to this ancesor. This is only used on Windows where</span>
    <span class="doccomment">/// opening a file handle appears to be quite expensive, so we choose to</span>
    <span class="doccomment">/// cache it. This comes at the cost of not respecting the file descriptor</span>
    <span class="doccomment">/// limit set by the user.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="ident">handle</span>: <span class="ident">Handle</span>,
}

<span class="kw">impl</span> <span class="ident">Ancestor</span> {
    <span class="doccomment">/// Create a new ancestor from the given directory path.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">new</span>(<span class="ident">dent</span>: <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">Ancestor</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">handle</span> <span class="op">=</span> <span class="ident">Handle</span>::<span class="ident">from_path</span>(<span class="ident">dent</span>.<span class="ident">path</span>())<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">Ancestor</span> {
            <span class="ident">path</span>: <span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>(),
            <span class="ident">handle</span>: <span class="ident">handle</span>,
        })
    }

    <span class="doccomment">/// Create a new ancestor from the given directory path.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">windows</span>))]</span>
    <span class="kw">fn</span> <span class="ident">new</span>(<span class="ident">dent</span>: <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">Ancestor</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="ident">Ancestor</span> { <span class="ident">path</span>: <span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>() })
    }

    <span class="doccomment">/// Returns true if and only if the given open file handle corresponds to</span>
    <span class="doccomment">/// the same directory as this ancestor.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">is_same</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">child</span>: <span class="kw-2">&amp;</span><span class="ident">Handle</span>) <span class="op">-&gt;</span> <span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="ident">child</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">handle</span>)
    }

    <span class="doccomment">/// Returns true if and only if the given open file handle corresponds to</span>
    <span class="doccomment">/// the same directory as this ancestor.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">windows</span>))]</span>
    <span class="kw">fn</span> <span class="ident">is_same</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">child</span>: <span class="kw-2">&amp;</span><span class="ident">Handle</span>) <span class="op">-&gt;</span> <span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="ident">child</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">Handle</span>::<span class="ident">from_path</span>(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">path</span>)<span class="question-mark">?</span>)
    }
}

<span class="doccomment">/// A sequence of unconsumed directory entries.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This represents the opened or closed state of a directory handle. When</span>
<span class="doccomment">/// open, future entries are read by iterating over the raw `fs::ReadDir`.</span>
<span class="doccomment">/// When closed, all future entries are read into memory. Iteration then</span>
<span class="doccomment">/// proceeds over a [`Vec&lt;fs::DirEntry&gt;`].</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`fs::ReadDir`]: https://doc.rust-lang.org/stable/std/fs/struct.ReadDir.html</span>
<span class="doccomment">/// [`Vec&lt;fs::DirEntry&gt;`]: https://doc.rust-lang.org/stable/std/vec/struct.Vec.html</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">enum</span> <span class="ident">DirList</span> {
    <span class="doccomment">/// An opened handle.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This includes the depth of the handle itself.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If there was an error with the initial [`fs::read_dir`] call, then it</span>
    <span class="doccomment">/// is stored here. (We use an [`Option&lt;...&gt;`] to make yielding the error</span>
    <span class="doccomment">/// exactly once simpler.)</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`fs::read_dir`]: https://doc.rust-lang.org/stable/std/fs/fn.read_dir.html</span>
    <span class="doccomment">/// [`Option&lt;...&gt;`]: https://doc.rust-lang.org/stable/std/option/enum.Option.html</span>
    <span class="ident">Opened</span> { <span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">it</span>: <span class="ident">result</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">ReadDir</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;&gt;</span> },
    <span class="doccomment">/// A closed handle.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// All remaining directory entries are read into memory.</span>
    <span class="ident">Closed</span>(<span class="ident">vec</span>::<span class="ident">IntoIter</span><span class="op">&lt;</span><span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;&gt;</span>),
}

<span class="doccomment">/// A directory entry.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This is the type of value that is yielded from the iterators defined in</span>
<span class="doccomment">/// this crate.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// On Unix systems, this type implements the [`DirEntryExt`] trait, which</span>
<span class="doccomment">/// provides efficient access to the inode number of the directory entry.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Differences with `std::fs::DirEntry`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This type mostly mirrors the type by the same name in [`std::fs`]. There</span>
<span class="doccomment">/// are some differences however:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// * All recursive directory iterators must inspect the entry&#39;s type.</span>
<span class="doccomment">/// Therefore, the value is stored and its access is guaranteed to be cheap and</span>
<span class="doccomment">/// successful.</span>
<span class="doccomment">/// * [`path`] and [`file_name`] return borrowed variants.</span>
<span class="doccomment">/// * If [`follow_links`] was enabled on the originating iterator, then all</span>
<span class="doccomment">/// operations except for [`path`] operate on the link target. Otherwise, all</span>
<span class="doccomment">/// operations operate on the symbolic link.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`std::fs`]: https://doc.rust-lang.org/stable/std/fs/index.html</span>
<span class="doccomment">/// [`path`]: #method.path</span>
<span class="doccomment">/// [`file_name`]: #method.file_name</span>
<span class="doccomment">/// [`follow_links`]: struct.WalkDir.html#method.follow_links</span>
<span class="doccomment">/// [`DirEntryExt`]: trait.DirEntryExt.html</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DirEntry</span> {
    <span class="doccomment">/// The path as reported by the [`fs::ReadDir`] iterator (even if it&#39;s a</span>
    <span class="doccomment">/// symbolic link).</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`fs::ReadDir`]: https://doc.rust-lang.org/stable/std/fs/struct.ReadDir.html</span>
    <span class="ident">path</span>: <span class="ident">PathBuf</span>,
    <span class="doccomment">/// The file type. Necessary for recursive iteration, so store it.</span>
    <span class="ident">ty</span>: <span class="ident">FileType</span>,
    <span class="doccomment">/// Is set when this entry was created from a symbolic link and the user</span>
    <span class="doccomment">/// expects the iterator to follow symbolic links.</span>
    <span class="ident">follow_link</span>: <span class="ident">bool</span>,
    <span class="doccomment">/// The depth at which this entry was generated relative to the root.</span>
    <span class="ident">depth</span>: <span class="ident">usize</span>,
    <span class="doccomment">/// The underlying inode number (Unix only).</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
    <span class="ident">ino</span>: <span class="ident">u64</span>,
    <span class="doccomment">/// The underlying metadata (Windows only). We store this on Windows</span>
    <span class="doccomment">/// because this comes for free while reading a directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// We use this to determine whether an entry is a directory or not, which</span>
    <span class="doccomment">/// works around a bug in Rust&#39;s standard library:</span>
    <span class="doccomment">/// https://github.com/rust-lang/rust/issues/46484</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="ident">metadata</span>: <span class="ident">fs</span>::<span class="ident">Metadata</span>,
}

<span class="kw">impl</span> <span class="ident">Iterator</span> <span class="kw">for</span> <span class="ident">IntoIter</span> {
    <span class="kw">type</span> <span class="ident">Item</span> <span class="op">=</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span>;
    <span class="doccomment">/// Advances the iterator and returns the next value.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Errors</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If the iterator fails to retrieve the next value, this method returns</span>
    <span class="doccomment">/// an error value. The error will be wrapped in an Option::Some.</span>
    <span class="kw">fn</span> <span class="ident">next</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;&gt;</span> {
        <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">start</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">start</span>.<span class="ident">take</span>() {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">same_file_system</span> {
                <span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">device_num</span>(<span class="kw-2">&amp;</span><span class="ident">start</span>)
                    .<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">e</span><span class="op">|</span> <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="number">0</span>, <span class="ident">start</span>.<span class="ident">clone</span>(), <span class="ident">e</span>));
                <span class="self">self</span>.<span class="ident">root_device</span> <span class="op">=</span> <span class="prelude-val">Some</span>(<span class="macro">itry</span><span class="macro">!</span>(<span class="ident">result</span>));
            }
            <span class="kw">let</span> <span class="ident">dent</span> <span class="op">=</span> <span class="macro">itry</span><span class="macro">!</span>(<span class="ident">DirEntry</span>::<span class="ident">from_path</span>(<span class="number">0</span>, <span class="ident">start</span>, <span class="bool-val">false</span>));
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">result</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">handle_entry</span>(<span class="ident">dent</span>) {
                <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="ident">result</span>);
            }
        }
        <span class="kw">while</span> <span class="op">!</span><span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">is_empty</span>() {
            <span class="self">self</span>.<span class="ident">depth</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">len</span>();
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">dentry</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">get_deferred_dir</span>() {
                <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">dentry</span>));
            }
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">depth</span> <span class="op">&gt;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span> {
                <span class="comment">// If we&#39;ve exceeded the max depth, pop the current dir</span>
                <span class="comment">// so that we don&#39;t descend.</span>
                <span class="self">self</span>.<span class="ident">pop</span>();
                <span class="kw">continue</span>;
            }
            <span class="comment">// Unwrap is safe here because we&#39;ve verified above that</span>
            <span class="comment">// `self.stack_list` is not empty</span>
            <span class="kw">let</span> <span class="ident">next</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">stack_list</span>
                .<span class="ident">last_mut</span>()
                .<span class="ident">expect</span>(<span class="string">&quot;BUG: stack should be non-empty&quot;</span>)
                .<span class="ident">next</span>();
            <span class="kw">match</span> <span class="ident">next</span> {
                <span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="self">self</span>.<span class="ident">pop</span>(),
                <span class="prelude-val">Some</span>(<span class="prelude-val">Err</span>(<span class="ident">err</span>)) <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Err</span>(<span class="ident">err</span>)),
                <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">dent</span>)) <span class="op">=&gt;</span> {
                    <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">result</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">handle_entry</span>(<span class="ident">dent</span>) {
                        <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="ident">result</span>);
                    }
                }
            }
        }
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">contents_first</span> {
            <span class="self">self</span>.<span class="ident">depth</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">len</span>();
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">dentry</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">get_deferred_dir</span>() {
                <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">dentry</span>));
            }
        }
        <span class="prelude-val">None</span>
    }
}

<span class="kw">impl</span> <span class="ident">IntoIter</span> {
    <span class="doccomment">/// Skips the current directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This causes the iterator to stop traversing the contents of the least</span>
    <span class="doccomment">/// recently yielded directory. This means any remaining entries in that</span>
    <span class="doccomment">/// directory will be skipped (including sub-directories).</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that the ergonomics of this method are questionable since it</span>
    <span class="doccomment">/// borrows the iterator mutably. Namely, you must write out the looping</span>
    <span class="doccomment">/// condition manually. For example, to skip hidden entries efficiently on</span>
    <span class="doccomment">/// unix systems:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::{DirEntry, WalkDir};</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// fn is_hidden(entry: &amp;DirEntry) -&gt; bool {</span>
    <span class="doccomment">///     entry.file_name()</span>
    <span class="doccomment">///          .to_str()</span>
    <span class="doccomment">///          .map(|s| s.starts_with(&quot;.&quot;))</span>
    <span class="doccomment">///          .unwrap_or(false)</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// let mut it = WalkDir::new(&quot;foo&quot;).into_iter();</span>
    <span class="doccomment">/// loop {</span>
    <span class="doccomment">///     let entry = match it.next() {</span>
    <span class="doccomment">///         None =&gt; break,</span>
    <span class="doccomment">///         Some(Err(err)) =&gt; panic!(&quot;ERROR: {}&quot;, err),</span>
    <span class="doccomment">///         Some(Ok(entry)) =&gt; entry,</span>
    <span class="doccomment">///     };</span>
    <span class="doccomment">///     if is_hidden(&amp;entry) {</span>
    <span class="doccomment">///         if entry.file_type().is_dir() {</span>
    <span class="doccomment">///             it.skip_current_dir();</span>
    <span class="doccomment">///         }</span>
    <span class="doccomment">///         continue;</span>
    <span class="doccomment">///     }</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// You may find it more convenient to use the [`filter_entry`] iterator</span>
    <span class="doccomment">/// adapter. (See its documentation for the same example functionality as</span>
    <span class="doccomment">/// above.)</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`filter_entry`]: #method.filter_entry</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">skip_current_dir</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) {
        <span class="kw">if</span> <span class="op">!</span><span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">is_empty</span>() {
            <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">pop</span>();
        }
        <span class="kw">if</span> <span class="op">!</span><span class="self">self</span>.<span class="ident">stack_path</span>.<span class="ident">is_empty</span>() {
            <span class="self">self</span>.<span class="ident">stack_path</span>.<span class="ident">pop</span>();
        }
    }

    <span class="doccomment">/// Yields only entries which satisfy the given predicate and skips</span>
    <span class="doccomment">/// descending into directories that do not satisfy the given predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The predicate is applied to all entries. If the predicate is</span>
    <span class="doccomment">/// true, iteration carries on as normal. If the predicate is false, the</span>
    <span class="doccomment">/// entry is ignored and if it is a directory, it is not descended into.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This is often more convenient to use than [`skip_current_dir`]. For</span>
    <span class="doccomment">/// example, to skip hidden files and directories efficiently on unix</span>
    <span class="doccomment">/// systems:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::{DirEntry, WalkDir};</span>
    <span class="doccomment">/// # use walkdir::Error;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// fn is_hidden(entry: &amp;DirEntry) -&gt; bool {</span>
    <span class="doccomment">///     entry.file_name()</span>
    <span class="doccomment">///          .to_str()</span>
    <span class="doccomment">///          .map(|s| s.starts_with(&quot;.&quot;))</span>
    <span class="doccomment">///          .unwrap_or(false)</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # fn try_main() -&gt; Result&lt;(), Error&gt; {</span>
    <span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;)</span>
    <span class="doccomment">///                      .into_iter()</span>
    <span class="doccomment">///                      .filter_entry(|e| !is_hidden(e)) {</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry?.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// # Ok(())</span>
    <span class="doccomment">/// # }</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that the iterator will still yield errors for reading entries that</span>
    <span class="doccomment">/// may not satisfy the predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that entries skipped with [`min_depth`] and [`max_depth`] are not</span>
    <span class="doccomment">/// passed to this predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that if the iterator has `contents_first` enabled, then this</span>
    <span class="doccomment">/// method is no different than calling the standard `Iterator::filter`</span>
    <span class="doccomment">/// method (because directory entries are yielded after they&#39;ve been</span>
    <span class="doccomment">/// descended into).</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`skip_current_dir`]: #method.skip_current_dir</span>
    <span class="doccomment">/// [`min_depth`]: struct.WalkDir.html#method.min_depth</span>
    <span class="doccomment">/// [`max_depth`]: struct.WalkDir.html#method.max_depth</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">filter_entry</span><span class="op">&lt;</span><span class="ident">P</span><span class="op">&gt;</span>(<span class="self">self</span>, <span class="ident">predicate</span>: <span class="ident">P</span>) <span class="op">-&gt;</span> <span class="ident">FilterEntry</span><span class="op">&lt;</span><span class="self">Self</span>, <span class="ident">P</span><span class="op">&gt;</span>
    <span class="kw">where</span> <span class="ident">P</span>: <span class="ident">FnMut</span>(<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">bool</span>
    {
        <span class="ident">FilterEntry</span> { <span class="ident">it</span>: <span class="self">self</span>, <span class="ident">predicate</span>: <span class="ident">predicate</span> }
    }

    <span class="kw">fn</span> <span class="ident">handle_entry</span>(
        <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>,
        <span class="kw-2">mut</span> <span class="ident">dent</span>: <span class="ident">DirEntry</span>,
    ) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;&gt;</span> {
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">follow_links</span> <span class="op">&amp;&amp;</span> <span class="ident">dent</span>.<span class="ident">file_type</span>().<span class="ident">is_symlink</span>() {
            <span class="ident">dent</span> <span class="op">=</span> <span class="macro">itry</span><span class="macro">!</span>(<span class="self">self</span>.<span class="ident">follow</span>(<span class="ident">dent</span>));
        }
        <span class="kw">let</span> <span class="ident">is_normal_dir</span> <span class="op">=</span> <span class="op">!</span><span class="ident">dent</span>.<span class="ident">file_type</span>().<span class="ident">is_symlink</span>() <span class="op">&amp;&amp;</span> <span class="ident">dent</span>.<span class="ident">is_dir</span>();
        <span class="kw">if</span> <span class="ident">is_normal_dir</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">same_file_system</span> <span class="op">&amp;&amp;</span> <span class="ident">dent</span>.<span class="ident">depth</span> <span class="op">&gt;</span> <span class="number">0</span> {
                <span class="kw">if</span> <span class="macro">itry</span><span class="macro">!</span>(<span class="self">self</span>.<span class="ident">is_same_file_system</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>)) {
                    <span class="macro">itry</span><span class="macro">!</span>(<span class="self">self</span>.<span class="ident">push</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>));
                }
            } <span class="kw">else</span> {
                <span class="macro">itry</span><span class="macro">!</span>(<span class="self">self</span>.<span class="ident">push</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>));
            }
        } <span class="kw">else</span> <span class="kw">if</span> <span class="ident">dent</span>.<span class="ident">depth</span>() <span class="op">==</span> <span class="number">0</span> <span class="op">&amp;&amp;</span> <span class="ident">dent</span>.<span class="ident">file_type</span>().<span class="ident">is_symlink</span>() {
            <span class="comment">// As a special case, if we are processing a root entry, then we</span>
            <span class="comment">// always follow it even if it&#39;s a symlink and follow_links is</span>
            <span class="comment">// false. We are careful to not let this change the semantics of</span>
            <span class="comment">// the DirEntry however. Namely, the DirEntry should still respect</span>
            <span class="comment">// the follow_links setting. When it&#39;s disabled, it should report</span>
            <span class="comment">// itself as a symlink. When it&#39;s enabled, it should always report</span>
            <span class="comment">// itself as the target.</span>
            <span class="kw">let</span> <span class="ident">md</span> <span class="op">=</span> <span class="macro">itry</span><span class="macro">!</span>(<span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="ident">dent</span>.<span class="ident">path</span>()).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">dent</span>.<span class="ident">depth</span>(), <span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>(), <span class="ident">err</span>)
            }));
            <span class="kw">if</span> <span class="ident">md</span>.<span class="ident">file_type</span>().<span class="ident">is_dir</span>() {
                <span class="macro">itry</span><span class="macro">!</span>(<span class="self">self</span>.<span class="ident">push</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>));
            }
        }
        <span class="kw">if</span> <span class="ident">is_normal_dir</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">contents_first</span> {
            <span class="self">self</span>.<span class="ident">deferred_dirs</span>.<span class="ident">push</span>(<span class="ident">dent</span>);
            <span class="prelude-val">None</span>
        } <span class="kw">else</span> <span class="kw">if</span> <span class="self">self</span>.<span class="ident">skippable</span>() {
            <span class="prelude-val">None</span>
        } <span class="kw">else</span> {
            <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">dent</span>))
        }
    }

    <span class="kw">fn</span> <span class="ident">get_deferred_dir</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">contents_first</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">depth</span> <span class="op">&lt;</span> <span class="self">self</span>.<span class="ident">deferred_dirs</span>.<span class="ident">len</span>() {
                <span class="comment">// Unwrap is safe here because we&#39;ve guaranteed that</span>
                <span class="comment">// `self.deferred_dirs.len()` can never be less than 1</span>
                <span class="kw">let</span> <span class="ident">deferred</span>: <span class="ident">DirEntry</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">deferred_dirs</span>.<span class="ident">pop</span>()
                    .<span class="ident">expect</span>(<span class="string">&quot;BUG: deferred_dirs should be non-empty&quot;</span>);
                <span class="kw">if</span> <span class="op">!</span><span class="self">self</span>.<span class="ident">skippable</span>() {
                    <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="ident">deferred</span>);
                }
            }
        }
        <span class="prelude-val">None</span>
    }

    <span class="kw">fn</span> <span class="ident">push</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">dent</span>: <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
        <span class="comment">// Make room for another open file descriptor if we&#39;ve hit the max.</span>
        <span class="kw">let</span> <span class="ident">free</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">stack_list</span>
            .<span class="ident">len</span>()
            .<span class="ident">checked_sub</span>(<span class="self">self</span>.<span class="ident">oldest_opened</span>).<span class="ident">unwrap</span>();
        <span class="kw">if</span> <span class="ident">free</span> <span class="op">==</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_open</span> {
            <span class="self">self</span>.<span class="ident">stack_list</span>[<span class="self">self</span>.<span class="ident">oldest_opened</span>].<span class="ident">close</span>();
            <span class="comment">// Unwrap is safe here because self.oldest_opened is guaranteed to</span>
            <span class="comment">// never be greater than `self.stack_list.len()`, which implies</span>
            <span class="comment">// that the subtraction won&#39;t underflow and that adding 1 will</span>
            <span class="comment">// never overflow.</span>
            <span class="self">self</span>.<span class="ident">oldest_opened</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">oldest_opened</span>.<span class="ident">checked_add</span>(<span class="number">1</span>).<span class="ident">unwrap</span>();
        }
        <span class="comment">// Open a handle to reading the directory&#39;s entries.</span>
        <span class="kw">let</span> <span class="ident">rd</span> <span class="op">=</span> <span class="ident">fs</span>::<span class="ident">read_dir</span>(<span class="ident">dent</span>.<span class="ident">path</span>()).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="self">self</span>.<span class="ident">depth</span>, <span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>(), <span class="ident">err</span>))
        });
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">list</span> <span class="op">=</span> <span class="ident">DirList</span>::<span class="ident">Opened</span> { <span class="ident">depth</span>: <span class="self">self</span>.<span class="ident">depth</span>, <span class="ident">it</span>: <span class="ident">rd</span> };
        <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">cmp</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">sorter</span> {
            <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">entries</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">list</span>.<span class="ident">collect</span>();
            <span class="ident">entries</span>.<span class="ident">sort_by</span>(<span class="op">|</span><span class="ident">a</span>, <span class="ident">b</span><span class="op">|</span> {
                <span class="kw">match</span> (<span class="ident">a</span>, <span class="ident">b</span>) {
                    (<span class="kw-2">&amp;</span><span class="prelude-val">Ok</span>(<span class="kw-2">ref</span> <span class="ident">a</span>), <span class="kw-2">&amp;</span><span class="prelude-val">Ok</span>(<span class="kw-2">ref</span> <span class="ident">b</span>)) <span class="op">=&gt;</span> {
                        <span class="ident">cmp</span>(<span class="ident">a</span>, <span class="ident">b</span>)
                    }
                    (<span class="kw-2">&amp;</span><span class="prelude-val">Err</span>(<span class="kw">_</span>), <span class="kw-2">&amp;</span><span class="prelude-val">Err</span>(<span class="kw">_</span>)) <span class="op">=&gt;</span> <span class="ident">Ordering</span>::<span class="ident">Equal</span>,
                    (<span class="kw-2">&amp;</span><span class="prelude-val">Ok</span>(<span class="kw">_</span>), <span class="kw-2">&amp;</span><span class="prelude-val">Err</span>(<span class="kw">_</span>)) <span class="op">=&gt;</span> <span class="ident">Ordering</span>::<span class="ident">Greater</span>,
                    (<span class="kw-2">&amp;</span><span class="prelude-val">Err</span>(<span class="kw">_</span>), <span class="kw-2">&amp;</span><span class="prelude-val">Ok</span>(<span class="kw">_</span>)) <span class="op">=&gt;</span> <span class="ident">Ordering</span>::<span class="ident">Less</span>,
                }
            });
            <span class="ident">list</span> <span class="op">=</span> <span class="ident">DirList</span>::<span class="ident">Closed</span>(<span class="ident">entries</span>.<span class="ident">into_iter</span>());
        }
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">follow_links</span> {
            <span class="kw">let</span> <span class="ident">ancestor</span> <span class="op">=</span> <span class="ident">Ancestor</span>::<span class="ident">new</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                <span class="ident">Error</span>::<span class="ident">from_io</span>(<span class="self">self</span>.<span class="ident">depth</span>, <span class="ident">err</span>)
            })<span class="question-mark">?</span>;
            <span class="self">self</span>.<span class="ident">stack_path</span>.<span class="ident">push</span>(<span class="ident">ancestor</span>);
        }
        <span class="comment">// We push this after stack_path since creating the Ancestor can fail.</span>
        <span class="comment">// If it fails, then we return the error and won&#39;t descend.</span>
        <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">push</span>(<span class="ident">list</span>);
        <span class="prelude-val">Ok</span>(())
    }

    <span class="kw">fn</span> <span class="ident">pop</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) {
        <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">pop</span>().<span class="ident">expect</span>(<span class="string">&quot;BUG: cannot pop from empty stack&quot;</span>);
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">follow_links</span> {
            <span class="self">self</span>.<span class="ident">stack_path</span>.<span class="ident">pop</span>().<span class="ident">expect</span>(<span class="string">&quot;BUG: list/path stacks out of sync&quot;</span>);
        }
        <span class="comment">// If everything in the stack is already closed, then there is</span>
        <span class="comment">// room for at least one more open descriptor and it will</span>
        <span class="comment">// always be at the top of the stack.</span>
        <span class="self">self</span>.<span class="ident">oldest_opened</span> <span class="op">=</span> <span class="ident">min</span>(<span class="self">self</span>.<span class="ident">oldest_opened</span>, <span class="self">self</span>.<span class="ident">stack_list</span>.<span class="ident">len</span>());
    }

    <span class="kw">fn</span> <span class="ident">follow</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="kw-2">mut</span> <span class="ident">dent</span>: <span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="ident">dent</span> <span class="op">=</span> <span class="ident">DirEntry</span>::<span class="ident">from_path</span>(
            <span class="self">self</span>.<span class="ident">depth</span>,
            <span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>(),
            <span class="bool-val">true</span>,
        )<span class="question-mark">?</span>;
        <span class="comment">// The only way a symlink can cause a loop is if it points</span>
        <span class="comment">// to a directory. Otherwise, it always points to a leaf</span>
        <span class="comment">// and we can omit any loop checks.</span>
        <span class="kw">if</span> <span class="ident">dent</span>.<span class="ident">is_dir</span>() {
            <span class="self">self</span>.<span class="ident">check_loop</span>(<span class="ident">dent</span>.<span class="ident">path</span>())<span class="question-mark">?</span>;
        }
        <span class="prelude-val">Ok</span>(<span class="ident">dent</span>)
    }

    <span class="kw">fn</span> <span class="ident">check_loop</span><span class="op">&lt;</span><span class="ident">P</span>: <span class="ident">AsRef</span><span class="op">&lt;</span><span class="ident">Path</span><span class="op">&gt;&gt;</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">child</span>: <span class="ident">P</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">hchild</span> <span class="op">=</span> <span class="ident">Handle</span>::<span class="ident">from_path</span>(<span class="kw-2">&amp;</span><span class="ident">child</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="ident">Error</span>::<span class="ident">from_io</span>(<span class="self">self</span>.<span class="ident">depth</span>, <span class="ident">err</span>)
        })<span class="question-mark">?</span>;
        <span class="kw">for</span> <span class="ident">ancestor</span> <span class="kw">in</span> <span class="self">self</span>.<span class="ident">stack_path</span>.<span class="ident">iter</span>().<span class="ident">rev</span>() {
            <span class="kw">let</span> <span class="ident">is_same</span> <span class="op">=</span> <span class="ident">ancestor</span>.<span class="ident">is_same</span>(<span class="kw-2">&amp;</span><span class="ident">hchild</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                <span class="ident">Error</span>::<span class="ident">from_io</span>(<span class="self">self</span>.<span class="ident">depth</span>, <span class="ident">err</span>)
            })<span class="question-mark">?</span>;
            <span class="kw">if</span> <span class="ident">is_same</span> {
                <span class="kw">return</span> <span class="prelude-val">Err</span>(<span class="ident">Error</span> {
                    <span class="ident">depth</span>: <span class="self">self</span>.<span class="ident">depth</span>,
                    <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> {
                        <span class="ident">ancestor</span>: <span class="ident">ancestor</span>.<span class="ident">path</span>.<span class="ident">to_path_buf</span>(),
                        <span class="ident">child</span>: <span class="ident">child</span>.<span class="ident">as_ref</span>().<span class="ident">to_path_buf</span>(),
                    },
                });
            }
        }
        <span class="prelude-val">Ok</span>(())
    }

    <span class="kw">fn</span> <span class="ident">is_same_file_system</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">dent</span>: <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">dent_device</span> <span class="op">=</span> <span class="ident">device_num</span>(<span class="kw-2">&amp;</span><span class="ident">dent</span>.<span class="ident">path</span>)
            .<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> <span class="ident">Error</span>::<span class="ident">from_entry</span>(<span class="ident">dent</span>, <span class="ident">err</span>))<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">root_device</span>
            .<span class="ident">map</span>(<span class="op">|</span><span class="ident">d</span><span class="op">|</span> <span class="ident">d</span> <span class="op">==</span> <span class="ident">dent_device</span>)
            .<span class="ident">expect</span>(<span class="string">&quot;BUG: called is_same_file_system without root device&quot;</span>))
    }

    <span class="kw">fn</span> <span class="ident">skippable</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
        <span class="self">self</span>.<span class="ident">depth</span> <span class="op">&lt;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">min_depth</span> <span class="op">||</span> <span class="self">self</span>.<span class="ident">depth</span> <span class="op">&gt;</span> <span class="self">self</span>.<span class="ident">opts</span>.<span class="ident">max_depth</span>
    }
}

<span class="kw">impl</span> <span class="ident">DirList</span> {
    <span class="kw">fn</span> <span class="ident">close</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) {
        <span class="kw">if</span> <span class="kw">let</span> <span class="ident">DirList</span>::<span class="ident">Opened</span> { .. } <span class="op">=</span> <span class="kw-2">*</span><span class="self">self</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="op">=</span> <span class="ident">DirList</span>::<span class="ident">Closed</span>(<span class="self">self</span>.<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;&gt;</span>().<span class="ident">into_iter</span>());
        }
    }
}

<span class="kw">impl</span> <span class="ident">Iterator</span> <span class="kw">for</span> <span class="ident">DirList</span> {
    <span class="kw">type</span> <span class="ident">Item</span> <span class="op">=</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span>;

    <span class="attribute">#[<span class="ident">inline</span>(<span class="ident">always</span>)]</span>
    <span class="kw">fn</span> <span class="ident">next</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;&gt;</span> {
        <span class="kw">match</span> <span class="kw-2">*</span><span class="self">self</span> {
            <span class="ident">DirList</span>::<span class="ident">Closed</span>(<span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">it</span>) <span class="op">=&gt;</span> <span class="ident">it</span>.<span class="ident">next</span>(),
            <span class="ident">DirList</span>::<span class="ident">Opened</span> { <span class="ident">depth</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">it</span> } <span class="op">=&gt;</span> <span class="kw">match</span> <span class="kw-2">*</span><span class="ident">it</span> {
                <span class="prelude-val">Err</span>(<span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">err</span>) <span class="op">=&gt;</span> <span class="ident">err</span>.<span class="ident">take</span>().<span class="ident">map</span>(<span class="prelude-val">Err</span>),
                <span class="prelude-val">Ok</span>(<span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">rd</span>) <span class="op">=&gt;</span> <span class="ident">rd</span>.<span class="ident">next</span>().<span class="ident">map</span>(<span class="op">|</span><span class="ident">r</span><span class="op">|</span> <span class="kw">match</span> <span class="ident">r</span> {
                    <span class="prelude-val">Ok</span>(<span class="ident">r</span>) <span class="op">=&gt;</span> <span class="ident">DirEntry</span>::<span class="ident">from_entry</span>(<span class="ident">depth</span> <span class="op">+</span> <span class="number">1</span>, <span class="kw-2">&amp;</span><span class="ident">r</span>),
                    <span class="prelude-val">Err</span>(<span class="ident">err</span>) <span class="op">=&gt;</span> <span class="prelude-val">Err</span>(<span class="ident">Error</span>::<span class="ident">from_io</span>(<span class="ident">depth</span> <span class="op">+</span> <span class="number">1</span>, <span class="ident">err</span>))
                }),
            }
        }
    }
}

<span class="kw">impl</span> <span class="ident">DirEntry</span> {
    <span class="doccomment">/// The full path that this entry represents.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The full path is created by joining the parents of this entry up to the</span>
    <span class="doccomment">/// root initially given to [`WalkDir::new`] with the file name of this</span>
    <span class="doccomment">/// entry.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that this *always* returns the path reported by the underlying</span>
    <span class="doccomment">/// directory entry, even when symbolic links are followed. To get the</span>
    <span class="doccomment">/// target path, use [`path_is_symlink`] to (cheaply) check if this entry</span>
    <span class="doccomment">/// corresponds to a symbolic link, and [`std::fs::read_link`] to resolve</span>
    <span class="doccomment">/// the target.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`WalkDir::new`]: struct.WalkDir.html#method.new</span>
    <span class="doccomment">/// [`path_is_symlink`]: struct.DirEntry.html#method.path_is_symlink</span>
    <span class="doccomment">/// [`std::fs::read_link`]: https://doc.rust-lang.org/stable/std/fs/fn.read_link.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">path</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="ident">Path</span> {
        <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">path</span>
    }

    <span class="doccomment">/// The full path that this entry represents.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Analogous to [`path`], but moves ownership of the path.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`path`]: struct.DirEntry.html#method.path</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">into_path</span>(<span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">PathBuf</span> {
        <span class="self">self</span>.<span class="ident">path</span>
    }

    <span class="doccomment">/// Returns `true` if and only if this entry was created from a symbolic</span>
    <span class="doccomment">/// link. This is unaffected by the [`follow_links`] setting.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// When `true`, the value returned by the [`path`] method is a</span>
    <span class="doccomment">/// symbolic link name. To get the full target path, you must call</span>
    <span class="doccomment">/// [`std::fs::read_link(entry.path())`].</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`path`]: struct.DirEntry.html#method.path</span>
    <span class="doccomment">/// [`follow_links`]: struct.WalkDir.html#method.follow_links</span>
    <span class="doccomment">/// [`std::fs::read_link(entry.path())`]: https://doc.rust-lang.org/stable/std/fs/fn.read_link.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">path_is_symlink</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
        <span class="self">self</span>.<span class="ident">ty</span>.<span class="ident">is_symlink</span>() <span class="op">||</span> <span class="self">self</span>.<span class="ident">follow_link</span>
    }

    <span class="doccomment">/// Return the metadata for the file that this entry points to.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This will follow symbolic links if and only if the [`WalkDir`] value</span>
    <span class="doccomment">/// has [`follow_links`] enabled.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Platform behavior</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This always calls [`std::fs::symlink_metadata`].</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If this entry is a symbolic link and [`follow_links`] is enabled, then</span>
    <span class="doccomment">/// [`std::fs::metadata`] is called instead.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Errors</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Similar to [`std::fs::metadata`], returns errors for path values that</span>
    <span class="doccomment">/// the program does not have permissions to access or if the path does not</span>
    <span class="doccomment">/// exist.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`WalkDir`]: struct.WalkDir.html</span>
    <span class="doccomment">/// [`follow_links`]: struct.WalkDir.html#method.follow_links</span>
    <span class="doccomment">/// [`std::fs::metadata`]: https://doc.rust-lang.org/std/fs/fn.metadata.html</span>
    <span class="doccomment">/// [`std::fs::symlink_metadata`]: https://doc.rust-lang.org/stable/std/fs/fn.symlink_metadata.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">fs</span>::<span class="ident">Metadata</span><span class="op">&gt;</span> {
        <span class="self">self</span>.<span class="ident">metadata_internal</span>()
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">metadata_internal</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">fs</span>::<span class="ident">Metadata</span><span class="op">&gt;</span> {
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">follow_link</span> {
            <span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">path</span>)
        } <span class="kw">else</span> {
            <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">metadata</span>.<span class="ident">clone</span>())
        }.<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> <span class="ident">Error</span>::<span class="ident">from_entry</span>(<span class="self">self</span>, <span class="ident">err</span>))
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">windows</span>))]</span>
    <span class="kw">fn</span> <span class="ident">metadata_internal</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">fs</span>::<span class="ident">Metadata</span><span class="op">&gt;</span> {
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">follow_link</span> {
            <span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">path</span>)
        } <span class="kw">else</span> {
            <span class="ident">fs</span>::<span class="ident">symlink_metadata</span>(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">path</span>)
        }.<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> <span class="ident">Error</span>::<span class="ident">from_entry</span>(<span class="self">self</span>, <span class="ident">err</span>))
    }

    <span class="doccomment">/// Return the file type for the file that this entry points to.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If this is a symbolic link and [`follow_links`] is `true`, then this</span>
    <span class="doccomment">/// returns the type of the target.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This never makes any system calls.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`follow_links`]: struct.WalkDir.html#method.follow_links</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">file_type</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">fs</span>::<span class="ident">FileType</span> {
        <span class="self">self</span>.<span class="ident">ty</span>
    }

    <span class="doccomment">/// Return the file name of this entry.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If this entry has no file name (e.g., `/`), then the full path is</span>
    <span class="doccomment">/// returned.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">file_name</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="ident">OsStr</span> {
        <span class="self">self</span>.<span class="ident">path</span>.<span class="ident">file_name</span>().<span class="ident">unwrap_or_else</span>(<span class="op">||</span> <span class="self">self</span>.<span class="ident">path</span>.<span class="ident">as_os_str</span>())
    }

    <span class="doccomment">/// Returns the depth at which this entry was created relative to the root.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The smallest depth is `0` and always corresponds to the path given</span>
    <span class="doccomment">/// to the `new` function on `WalkDir`. Its direct descendents have depth</span>
    <span class="doccomment">/// `1`, and their descendents have depth `2`, and so on.</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">depth</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">usize</span> {
        <span class="self">self</span>.<span class="ident">depth</span>
    }

    <span class="doccomment">/// Returns true if and only if this entry points to a directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This works around a bug in Rust&#39;s standard library:</span>
    <span class="doccomment">/// https://github.com/rust-lang/rust/issues/46484</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">is_dir</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
        <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">windows</span>::<span class="ident">fs</span>::<span class="ident">MetadataExt</span>;
        <span class="kw">use</span> <span class="ident">winapi</span>::<span class="ident">um</span>::<span class="ident">winnt</span>::<span class="ident">FILE_ATTRIBUTE_DIRECTORY</span>;
        <span class="self">self</span>.<span class="ident">metadata</span>.<span class="ident">file_attributes</span>() <span class="op">&amp;</span> <span class="ident">FILE_ATTRIBUTE_DIRECTORY</span> <span class="op">!=</span> <span class="number">0</span>
    }

    <span class="doccomment">/// Returns true if and only if this entry points to a directory.</span>
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">windows</span>))]</span>
    <span class="kw">fn</span> <span class="ident">is_dir</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
        <span class="self">self</span>.<span class="ident">ty</span>.<span class="ident">is_dir</span>()
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">from_entry</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">ent</span>: <span class="kw-2">&amp;</span><span class="ident">fs</span>::<span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">path</span> <span class="op">=</span> <span class="ident">ent</span>.<span class="ident">path</span>();
        <span class="kw">let</span> <span class="ident">ty</span> <span class="op">=</span> <span class="ident">ent</span>.<span class="ident">file_type</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">path</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
        })<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">md</span> <span class="op">=</span> <span class="ident">ent</span>.<span class="ident">metadata</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">path</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
        })<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">path</span>,
            <span class="ident">ty</span>: <span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="bool-val">false</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">metadata</span>: <span class="ident">md</span>,
        })
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
    <span class="kw">fn</span> <span class="ident">from_entry</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">ent</span>: <span class="kw-2">&amp;</span><span class="ident">fs</span>::<span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">fs</span>::<span class="ident">DirEntryExt</span>;

        <span class="kw">let</span> <span class="ident">ty</span> <span class="op">=</span> <span class="ident">ent</span>.<span class="ident">file_type</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">ent</span>.<span class="ident">path</span>(), <span class="ident">err</span>)
        })<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">ent</span>.<span class="ident">path</span>(),
            <span class="ident">ty</span>: <span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="bool-val">false</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">ino</span>: <span class="ident">ent</span>.<span class="ident">ino</span>(),
        })
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">any</span>(<span class="ident">unix</span>, <span class="ident">windows</span>)))]</span>
    <span class="kw">fn</span> <span class="ident">from_entry</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">ent</span>: <span class="kw-2">&amp;</span><span class="ident">fs</span>::<span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">ty</span> <span class="op">=</span> <span class="ident">ent</span>.<span class="ident">file_type</span>().<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
            <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">ent</span>.<span class="ident">path</span>(), <span class="ident">err</span>)
        })<span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">ent</span>.<span class="ident">path</span>(),
            <span class="ident">ty</span>: <span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="bool-val">false</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
        })
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">from_path</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">pb</span>: <span class="ident">PathBuf</span>, <span class="ident">follow</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">md</span> <span class="op">=</span>
            <span class="kw">if</span> <span class="ident">follow</span> {
                <span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            } <span class="kw">else</span> {
                <span class="ident">fs</span>::<span class="ident">symlink_metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            };
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">pb</span>,
            <span class="ident">ty</span>: <span class="ident">md</span>.<span class="ident">file_type</span>(),
            <span class="ident">follow_link</span>: <span class="ident">follow</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">metadata</span>: <span class="ident">md</span>,
        })
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
    <span class="kw">fn</span> <span class="ident">from_path</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">pb</span>: <span class="ident">PathBuf</span>, <span class="ident">follow</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">fs</span>::<span class="ident">MetadataExt</span>;

        <span class="kw">let</span> <span class="ident">md</span> <span class="op">=</span>
            <span class="kw">if</span> <span class="ident">follow</span> {
                <span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            } <span class="kw">else</span> {
                <span class="ident">fs</span>::<span class="ident">symlink_metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            };
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">pb</span>,
            <span class="ident">ty</span>: <span class="ident">md</span>.<span class="ident">file_type</span>(),
            <span class="ident">follow_link</span>: <span class="ident">follow</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">ino</span>: <span class="ident">md</span>.<span class="ident">ino</span>(),
        })
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">any</span>(<span class="ident">unix</span>, <span class="ident">windows</span>)))]</span>
    <span class="kw">fn</span> <span class="ident">from_path</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">pb</span>: <span class="ident">PathBuf</span>, <span class="ident">follow</span>: <span class="ident">bool</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">md</span> <span class="op">=</span>
            <span class="kw">if</span> <span class="ident">follow</span> {
                <span class="ident">fs</span>::<span class="ident">metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            } <span class="kw">else</span> {
                <span class="ident">fs</span>::<span class="ident">symlink_metadata</span>(<span class="kw-2">&amp;</span><span class="ident">pb</span>).<span class="ident">map_err</span>(<span class="op">|</span><span class="ident">err</span><span class="op">|</span> {
                    <span class="ident">Error</span>::<span class="ident">from_path</span>(<span class="ident">depth</span>, <span class="ident">pb</span>.<span class="ident">clone</span>(), <span class="ident">err</span>)
                })<span class="question-mark">?</span>
            };
        <span class="prelude-val">Ok</span>(<span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="ident">pb</span>,
            <span class="ident">ty</span>: <span class="ident">md</span>.<span class="ident">file_type</span>(),
            <span class="ident">follow_link</span>: <span class="ident">follow</span>,
            <span class="ident">depth</span>: <span class="ident">depth</span>,
        })
    }
}

<span class="kw">impl</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">DirEntry</span> {
    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
    <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">DirEntry</span> {
        <span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="self">self</span>.<span class="ident">path</span>.<span class="ident">clone</span>(),
            <span class="ident">ty</span>: <span class="self">self</span>.<span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="self">self</span>.<span class="ident">follow_link</span>,
            <span class="ident">depth</span>: <span class="self">self</span>.<span class="ident">depth</span>,
            <span class="ident">metadata</span>: <span class="self">self</span>.<span class="ident">metadata</span>.<span class="ident">clone</span>(),
        }
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
    <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">DirEntry</span> {
        <span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="self">self</span>.<span class="ident">path</span>.<span class="ident">clone</span>(),
            <span class="ident">ty</span>: <span class="self">self</span>.<span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="self">self</span>.<span class="ident">follow_link</span>,
            <span class="ident">depth</span>: <span class="self">self</span>.<span class="ident">depth</span>,
            <span class="ident">ino</span>: <span class="self">self</span>.<span class="ident">ino</span>,
        }
    }

    <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">any</span>(<span class="ident">unix</span>, <span class="ident">windows</span>)))]</span>
    <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">DirEntry</span> {
        <span class="ident">DirEntry</span> {
            <span class="ident">path</span>: <span class="self">self</span>.<span class="ident">path</span>.<span class="ident">clone</span>(),
            <span class="ident">ty</span>: <span class="self">self</span>.<span class="ident">ty</span>,
            <span class="ident">follow_link</span>: <span class="self">self</span>.<span class="ident">follow_link</span>,
            <span class="ident">depth</span>: <span class="self">self</span>.<span class="ident">depth</span>,
        }
    }
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">DirEntry</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span>) <span class="op">-&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="macro">write</span><span class="macro">!</span>(<span class="ident">f</span>, <span class="string">&quot;DirEntry({:?})&quot;</span>, <span class="self">self</span>.<span class="ident">path</span>)
    }
}

<span class="doccomment">/// A recursive directory iterator that skips entries.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Values of this type are created by calling [`.filter_entry()`] on an</span>
<span class="doccomment">/// `IntoIter`, which is formed by calling [`.into_iter()`] on a `WalkDir`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Directories that fail the predicate `P` are skipped. Namely, they are</span>
<span class="doccomment">/// never yielded and never descended into.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Entries that are skipped with the [`min_depth`] and [`max_depth`] options</span>
<span class="doccomment">/// are not passed through this filter.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// If opening a handle to a directory resulted in an error, then it is yielded</span>
<span class="doccomment">/// and no corresponding call to the predicate is made.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Type parameter `I` refers to the underlying iterator and `P` refers to the</span>
<span class="doccomment">/// predicate, which is usually `FnMut(&amp;DirEntry) -&gt; bool`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`.filter_entry()`]: struct.IntoIter.html#method.filter_entry</span>
<span class="doccomment">/// [`.into_iter()`]: struct.WalkDir.html#into_iter.v</span>
<span class="doccomment">/// [`min_depth`]: struct.WalkDir.html#method.min_depth</span>
<span class="doccomment">/// [`max_depth`]: struct.WalkDir.html#method.max_depth</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">FilterEntry</span><span class="op">&lt;</span><span class="ident">I</span>, <span class="ident">P</span><span class="op">&gt;</span> {
    <span class="ident">it</span>: <span class="ident">I</span>,
    <span class="ident">predicate</span>: <span class="ident">P</span>,
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">P</span><span class="op">&gt;</span> <span class="ident">Iterator</span> <span class="kw">for</span> <span class="ident">FilterEntry</span><span class="op">&lt;</span><span class="ident">IntoIter</span>, <span class="ident">P</span><span class="op">&gt;</span>
<span class="kw">where</span> <span class="ident">P</span>: <span class="ident">FnMut</span>(<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">bool</span>
{
    <span class="kw">type</span> <span class="ident">Item</span> <span class="op">=</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;</span>;

    <span class="doccomment">/// Advances the iterator and returns the next value.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Errors</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If the iterator fails to retrieve the next value, this method returns</span>
    <span class="doccomment">/// an error value. The error will be wrapped in an `Option::Some`.</span>
    <span class="kw">fn</span> <span class="ident">next</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">DirEntry</span><span class="op">&gt;&gt;</span> {
        <span class="kw">loop</span> {
            <span class="kw">let</span> <span class="ident">dent</span> <span class="op">=</span> <span class="kw">match</span> <span class="self">self</span>.<span class="ident">it</span>.<span class="ident">next</span>() {
                <span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">None</span>,
                <span class="prelude-val">Some</span>(<span class="ident">result</span>) <span class="op">=&gt;</span> <span class="macro">itry</span><span class="macro">!</span>(<span class="ident">result</span>),
            };
            <span class="kw">if</span> <span class="op">!</span>(<span class="self">self</span>.<span class="ident">predicate</span>)(<span class="kw-2">&amp;</span><span class="ident">dent</span>) {
                <span class="kw">if</span> <span class="ident">dent</span>.<span class="ident">is_dir</span>() {
                    <span class="self">self</span>.<span class="ident">it</span>.<span class="ident">skip_current_dir</span>();
                }
                <span class="kw">continue</span>;
            }
            <span class="kw">return</span> <span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(<span class="ident">dent</span>));
        }
    }
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">P</span><span class="op">&gt;</span> <span class="ident">FilterEntry</span><span class="op">&lt;</span><span class="ident">IntoIter</span>, <span class="ident">P</span><span class="op">&gt;</span> <span class="kw">where</span> <span class="ident">P</span>: <span class="ident">FnMut</span>(<span class="kw-2">&amp;</span><span class="ident">DirEntry</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
    <span class="doccomment">/// Yields only entries which satisfy the given predicate and skips</span>
    <span class="doccomment">/// descending into directories that do not satisfy the given predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The predicate is applied to all entries. If the predicate is</span>
    <span class="doccomment">/// true, iteration carries on as normal. If the predicate is false, the</span>
    <span class="doccomment">/// entry is ignored and if it is a directory, it is not descended into.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This is often more convenient to use than [`skip_current_dir`]. For</span>
    <span class="doccomment">/// example, to skip hidden files and directories efficiently on unix</span>
    <span class="doccomment">/// systems:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::{DirEntry, WalkDir};</span>
    <span class="doccomment">/// # use walkdir::Error;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// fn is_hidden(entry: &amp;DirEntry) -&gt; bool {</span>
    <span class="doccomment">///     entry.file_name()</span>
    <span class="doccomment">///          .to_str()</span>
    <span class="doccomment">///          .map(|s| s.starts_with(&quot;.&quot;))</span>
    <span class="doccomment">///          .unwrap_or(false)</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # fn try_main() -&gt; Result&lt;(), Error&gt; {</span>
    <span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;)</span>
    <span class="doccomment">///                      .into_iter()</span>
    <span class="doccomment">///                      .filter_entry(|e| !is_hidden(e)) {</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry?.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// # Ok(())</span>
    <span class="doccomment">/// # }</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that the iterator will still yield errors for reading entries that</span>
    <span class="doccomment">/// may not satisfy the predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that entries skipped with [`min_depth`] and [`max_depth`] are not</span>
    <span class="doccomment">/// passed to this predicate.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that if the iterator has `contents_first` enabled, then this</span>
    <span class="doccomment">/// method is no different than calling the standard `Iterator::filter`</span>
    <span class="doccomment">/// method (because directory entries are yielded after they&#39;ve been</span>
    <span class="doccomment">/// descended into).</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`skip_current_dir`]: #method.skip_current_dir</span>
    <span class="doccomment">/// [`min_depth`]: struct.WalkDir.html#method.min_depth</span>
    <span class="doccomment">/// [`max_depth`]: struct.WalkDir.html#method.max_depth</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">filter_entry</span>(<span class="self">self</span>, <span class="ident">predicate</span>: <span class="ident">P</span>) <span class="op">-&gt;</span> <span class="ident">FilterEntry</span><span class="op">&lt;</span><span class="self">Self</span>, <span class="ident">P</span><span class="op">&gt;</span> {
        <span class="ident">FilterEntry</span> { <span class="ident">it</span>: <span class="self">self</span>, <span class="ident">predicate</span>: <span class="ident">predicate</span> }
    }

    <span class="doccomment">/// Skips the current directory.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This causes the iterator to stop traversing the contents of the least</span>
    <span class="doccomment">/// recently yielded directory. This means any remaining entries in that</span>
    <span class="doccomment">/// directory will be skipped (including sub-directories).</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Note that the ergonomics of this method are questionable since it</span>
    <span class="doccomment">/// borrows the iterator mutably. Namely, you must write out the looping</span>
    <span class="doccomment">/// condition manually. For example, to skip hidden entries efficiently on</span>
    <span class="doccomment">/// unix systems:</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```no_run</span>
    <span class="doccomment">/// use walkdir::{DirEntry, WalkDir};</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// fn is_hidden(entry: &amp;DirEntry) -&gt; bool {</span>
    <span class="doccomment">///     entry.file_name()</span>
    <span class="doccomment">///          .to_str()</span>
    <span class="doccomment">///          .map(|s| s.starts_with(&quot;.&quot;))</span>
    <span class="doccomment">///          .unwrap_or(false)</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// let mut it = WalkDir::new(&quot;foo&quot;).into_iter();</span>
    <span class="doccomment">/// loop {</span>
    <span class="doccomment">///     let entry = match it.next() {</span>
    <span class="doccomment">///         None =&gt; break,</span>
    <span class="doccomment">///         Some(Err(err)) =&gt; panic!(&quot;ERROR: {}&quot;, err),</span>
    <span class="doccomment">///         Some(Ok(entry)) =&gt; entry,</span>
    <span class="doccomment">///     };</span>
    <span class="doccomment">///     if is_hidden(&amp;entry) {</span>
    <span class="doccomment">///         if entry.file_type().is_dir() {</span>
    <span class="doccomment">///             it.skip_current_dir();</span>
    <span class="doccomment">///         }</span>
    <span class="doccomment">///         continue;</span>
    <span class="doccomment">///     }</span>
    <span class="doccomment">///     println!(&quot;{}&quot;, entry.path().display());</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// You may find it more convenient to use the [`filter_entry`] iterator</span>
    <span class="doccomment">/// adapter. (See its documentation for the same example functionality as</span>
    <span class="doccomment">/// above.)</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`filter_entry`]: #method.filter_entry</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">skip_current_dir</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>) {
        <span class="self">self</span>.<span class="ident">it</span>.<span class="ident">skip_current_dir</span>();
    }
}

<span class="doccomment">/// An error produced by recursively walking a directory.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// This error type is a light wrapper around [`std::io::Error`]. In</span>
<span class="doccomment">/// particular, it adds the following information:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// * The depth at which the error occurred in the file tree, relative to the</span>
<span class="doccomment">/// root.</span>
<span class="doccomment">/// * The path, if any, associated with the IO error.</span>
<span class="doccomment">/// * An indication that a loop occurred when following symbolic links. In this</span>
<span class="doccomment">/// case, there is no underlying IO error.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// To maintain good ergonomics, this type has a</span>
<span class="doccomment">/// [`impl From&lt;Error&gt; for std::io::Error`][impl] defined which preserves the original context.</span>
<span class="doccomment">/// This allows you to use an [`io::Result`] with methods in this crate if you don&#39;t care about</span>
<span class="doccomment">/// accessing the underlying error data in a structured form.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// [`std::io::Error`]: https://doc.rust-lang.org/stable/std/io/struct.Error.html</span>
<span class="doccomment">/// [`io::Result`]: https://doc.rust-lang.org/stable/std/io/type.Result.html</span>
<span class="doccomment">/// [impl]: struct.Error.html#impl-From%3CError%3E</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Error</span> {
    <span class="ident">depth</span>: <span class="ident">usize</span>,
    <span class="ident">inner</span>: <span class="ident">ErrorInner</span>,
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">enum</span> <span class="ident">ErrorInner</span> {
    <span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">PathBuf</span><span class="op">&gt;</span>, <span class="ident">err</span>: <span class="ident">io</span>::<span class="ident">Error</span> },
    <span class="ident">Loop</span> { <span class="ident">ancestor</span>: <span class="ident">PathBuf</span>, <span class="ident">child</span>: <span class="ident">PathBuf</span> },
}

<span class="kw">impl</span> <span class="ident">Error</span> {
    <span class="doccomment">/// Returns the path associated with this error if one exists.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// For example, if an error occurred while opening a directory handle,</span>
    <span class="doccomment">/// the error will include the path passed to [`std::fs::read_dir`].</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`std::fs::read_dir`]: https://doc.rust-lang.org/stable/std/fs/fn.read_dir.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">path</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">Path</span><span class="op">&gt;</span> {
        <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">None</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">None</span>,
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">path</span>), .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">path</span>),
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { <span class="kw-2">ref</span> <span class="ident">child</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">child</span>),
        }
    }

    <span class="doccomment">/// Returns the path at which a cycle was detected.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If no cycle was detected, [`None`] is returned.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// A cycle is detected when a directory entry is equivalent to one of</span>
    <span class="doccomment">/// its ancestors.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// To get the path to the child directory entry in the cycle, use the</span>
    <span class="doccomment">/// [`path`] method.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`None`]: https://doc.rust-lang.org/stable/std/option/enum.Option.html#variant.None</span>
    <span class="doccomment">/// [`path`]: struct.Error.html#path</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">loop_ancestor</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">Path</span><span class="op">&gt;</span> {
        <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { <span class="kw-2">ref</span> <span class="ident">ancestor</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ancestor</span>),
            <span class="kw">_</span> <span class="op">=&gt;</span> <span class="prelude-val">None</span>,
        }
    }

    <span class="doccomment">/// Returns the depth at which this error occurred relative to the root.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The smallest depth is `0` and always corresponds to the path given to</span>
    <span class="doccomment">/// the [`new`] function on [`WalkDir`]. Its direct descendents have depth</span>
    <span class="doccomment">/// `1`, and their descendents have depth `2`, and so on.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`new`]: struct.WalkDir.html#method.new</span>
    <span class="doccomment">/// [`WalkDir`]: struct.WalkDir.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">depth</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">usize</span> {
        <span class="self">self</span>.<span class="ident">depth</span>
    }

    <span class="doccomment">/// Inspect the original [`io::Error`] if there is one.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`None`] is returned if the [`Error`] doesn&#39;t correspond to an</span>
    <span class="doccomment">/// [`io::Error`]. This might happen, for example, when the error was</span>
    <span class="doccomment">/// produced because a cycle was found in the directory tree while</span>
    <span class="doccomment">/// following symbolic links.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This method returns a borrowed value that is bound to the lifetime of the [`Error`]. To</span>
    <span class="doccomment">/// obtain an owned value, the [`into_io_error`] can be used instead.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// &gt; This is the original [`io::Error`] and is _not_ the same as</span>
    <span class="doccomment">/// &gt; [`impl From&lt;Error&gt; for std::io::Error`][impl] which contains additional context about the</span>
    <span class="doccomment">/// error.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Example</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```rust,no-run</span>
    <span class="doccomment">/// use std::io;</span>
    <span class="doccomment">/// use std::path::Path;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// use walkdir::WalkDir;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// for entry in WalkDir::new(&quot;foo&quot;) {</span>
    <span class="doccomment">///     match entry {</span>
    <span class="doccomment">///         Ok(entry) =&gt; println!(&quot;{}&quot;, entry.path().display()),</span>
    <span class="doccomment">///         Err(err) =&gt; {</span>
    <span class="doccomment">///             let path = err.path().unwrap_or(Path::new(&quot;&quot;)).display();</span>
    <span class="doccomment">///             println!(&quot;failed to access entry {}&quot;, path);</span>
    <span class="doccomment">///             if let Some(inner) = err.io_error() {</span>
    <span class="doccomment">///                 match inner.kind() {</span>
    <span class="doccomment">///                     io::ErrorKind::InvalidData =&gt; {</span>
    <span class="doccomment">///                         println!(</span>
    <span class="doccomment">///                             &quot;entry contains invalid data: {}&quot;,</span>
    <span class="doccomment">///                             inner)</span>
    <span class="doccomment">///                     }</span>
    <span class="doccomment">///                     io::ErrorKind::PermissionDenied =&gt; {</span>
    <span class="doccomment">///                         println!(</span>
    <span class="doccomment">///                             &quot;Missing permission to read entry: {}&quot;,</span>
    <span class="doccomment">///                             inner)</span>
    <span class="doccomment">///                     }</span>
    <span class="doccomment">///                     _ =&gt; {</span>
    <span class="doccomment">///                         println!(</span>
    <span class="doccomment">///                             &quot;Unexpected error occurred: {}&quot;,</span>
    <span class="doccomment">///                             inner)</span>
    <span class="doccomment">///                     }</span>
    <span class="doccomment">///                 }</span>
    <span class="doccomment">///             }</span>
    <span class="doccomment">///         }</span>
    <span class="doccomment">///     }</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`None`]: https://doc.rust-lang.org/stable/std/option/enum.Option.html#variant.None</span>
    <span class="doccomment">/// [`io::Error`]: https://doc.rust-lang.org/stable/std/io/struct.Error.html</span>
    <span class="doccomment">/// [`From`]: https://doc.rust-lang.org/stable/std/convert/trait.From.html</span>
    <span class="doccomment">/// [`Error`]: struct.Error.html</span>
    <span class="doccomment">/// [`into_io_error`]: struct.Error.html#method.into_io_error</span>
    <span class="doccomment">/// [impl]: struct.Error.html#impl-From%3CError%3E</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">io_error</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">io</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
       <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="kw-2">ref</span> <span class="ident">err</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">err</span>),
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { .. } <span class="op">=&gt;</span> <span class="prelude-val">None</span>,
       }
    }

    <span class="doccomment">/// Similar to [`io_error`] except consumes self to convert to the original</span>
    <span class="doccomment">/// [`io::Error`] if one exists.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`io_error`]: struct.Error.html#method.io_error</span>
    <span class="doccomment">/// [`io::Error`]: https://doc.rust-lang.org/stable/std/io/struct.Error.html</span>
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">into_io_error</span>(<span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">io</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
       <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">err</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">err</span>),
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { .. } <span class="op">=&gt;</span> <span class="prelude-val">None</span>,
       }
    }

    <span class="kw">fn</span> <span class="ident">from_path</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">pb</span>: <span class="ident">PathBuf</span>, <span class="ident">err</span>: <span class="ident">io</span>::<span class="ident">Error</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="ident">Error</span> {
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">Some</span>(<span class="ident">pb</span>), <span class="ident">err</span>: <span class="ident">err</span> },
        }
    }

    <span class="kw">fn</span> <span class="ident">from_entry</span>(<span class="ident">dent</span>: <span class="kw-2">&amp;</span><span class="ident">DirEntry</span>, <span class="ident">err</span>: <span class="ident">io</span>::<span class="ident">Error</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="ident">Error</span> {
            <span class="ident">depth</span>: <span class="ident">dent</span>.<span class="ident">depth</span>,
            <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Io</span> {
                <span class="ident">path</span>: <span class="prelude-val">Some</span>(<span class="ident">dent</span>.<span class="ident">path</span>().<span class="ident">to_path_buf</span>()),
                <span class="ident">err</span>: <span class="ident">err</span>,
            },
        }
    }

    <span class="kw">fn</span> <span class="ident">from_io</span>(<span class="ident">depth</span>: <span class="ident">usize</span>, <span class="ident">err</span>: <span class="ident">io</span>::<span class="ident">Error</span>) <span class="op">-&gt;</span> <span class="self">Self</span> {
        <span class="ident">Error</span> {
            <span class="ident">depth</span>: <span class="ident">depth</span>,
            <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">None</span>, <span class="ident">err</span>: <span class="ident">err</span> },
        }
    }
}

<span class="kw">impl</span> <span class="ident">error</span>::<span class="ident">Error</span> <span class="kw">for</span> <span class="ident">Error</span> {
    <span class="kw">fn</span> <span class="ident">description</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="ident">str</span> {
        <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="kw-2">ref</span> <span class="ident">err</span>, .. } <span class="op">=&gt;</span> <span class="ident">err</span>.<span class="ident">description</span>(),
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { .. } <span class="op">=&gt;</span> <span class="string">&quot;file system loop found&quot;</span>,
        }
    }

    <span class="kw">fn</span> <span class="ident">cause</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">error</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
        <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="kw-2">ref</span> <span class="ident">err</span>, .. } <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">err</span>),
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { .. } <span class="op">=&gt;</span> <span class="prelude-val">None</span>,
        }
    }
}

<span class="kw">impl</span> <span class="ident">fmt</span>::<span class="ident">Display</span> <span class="kw">for</span> <span class="ident">Error</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">fmt</span>::<span class="ident">Formatter</span>) <span class="op">-&gt;</span> <span class="ident">fmt</span>::<span class="prelude-ty">Result</span> {
        <span class="kw">match</span> <span class="self">self</span>.<span class="ident">inner</span> {
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">None</span>, <span class="kw-2">ref</span> <span class="ident">err</span> } <span class="op">=&gt;</span> {
                <span class="ident">err</span>.<span class="ident">fmt</span>(<span class="ident">f</span>)
            }
            <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="ident">path</span>: <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">path</span>), <span class="kw-2">ref</span> <span class="ident">err</span> } <span class="op">=&gt;</span> {
                <span class="macro">write</span><span class="macro">!</span>(<span class="ident">f</span>, <span class="string">&quot;IO error for operation on {}: {}&quot;</span>,
                       <span class="ident">path</span>.<span class="ident">display</span>(), <span class="ident">err</span>)
            }
            <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { <span class="kw-2">ref</span> <span class="ident">ancestor</span>, <span class="kw-2">ref</span> <span class="ident">child</span> } <span class="op">=&gt;</span> {
                <span class="macro">write</span><span class="macro">!</span>(<span class="ident">f</span>, <span class="string">&quot;File system loop found: \
                           {} points to an ancestor {}&quot;</span>,
                       <span class="ident">child</span>.<span class="ident">display</span>(), <span class="ident">ancestor</span>.<span class="ident">display</span>())
            }
        }
    }
}

<span class="kw">impl</span> <span class="ident">From</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">io</span>::<span class="ident">Error</span> {
    <span class="doccomment">/// Convert the [`Error`] to an [`io::Error`], preserving the original</span>
    <span class="doccomment">/// [`Error`] as the [&quot;inner error&quot;]. Note that this also makes the display</span>
    <span class="doccomment">/// of the error include the context.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This is different from [`into_io_error`] which returns the original</span>
    <span class="doccomment">/// [`io::Error`].</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// [`Error`]: struct.Error.html</span>
    <span class="doccomment">/// [`io::Error`]: https://doc.rust-lang.org/stable/std/io/struct.Error.html</span>
    <span class="doccomment">/// [&quot;inner error&quot;]: https://doc.rust-lang.org/std/io/struct.Error.html#method.into_inner</span>
    <span class="doccomment">/// [`into_io_error`]: struct.WalkDir.html#method.into_io_error</span>
    <span class="kw">fn</span> <span class="ident">from</span>(<span class="ident">walk_err</span>: <span class="ident">Error</span>) <span class="op">-&gt;</span> <span class="ident">io</span>::<span class="ident">Error</span> {
        <span class="kw">let</span> <span class="ident">kind</span> <span class="op">=</span> <span class="kw">match</span> <span class="ident">walk_err</span> {
            <span class="ident">Error</span> { <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Io</span> { <span class="kw-2">ref</span> <span class="ident">err</span>, .. }, .. } <span class="op">=&gt;</span> {
                <span class="ident">err</span>.<span class="ident">kind</span>()
            }
            <span class="ident">Error</span> { <span class="ident">inner</span>: <span class="ident">ErrorInner</span>::<span class="ident">Loop</span> { .. }, .. } <span class="op">=&gt;</span> {
                <span class="ident">io</span>::<span class="ident">ErrorKind</span>::<span class="ident">Other</span>
            }
        };
        <span class="ident">io</span>::<span class="ident">Error</span>::<span class="ident">new</span>(<span class="ident">kind</span>, <span class="ident">walk_err</span>)
    }
}

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">unix</span>)]</span>
<span class="kw">fn</span> <span class="ident">device_num</span><span class="op">&lt;</span><span class="ident">P</span>: <span class="ident">AsRef</span><span class="op">&lt;</span><span class="ident">Path</span><span class="op">&gt;&gt;</span>(<span class="ident">path</span>: <span class="ident">P</span>)<span class="op">-&gt;</span> <span class="ident">std</span>::<span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span> {
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">fs</span>::<span class="ident">MetadataExt</span>;

    <span class="ident">path</span>.<span class="ident">as_ref</span>().<span class="ident">metadata</span>().<span class="ident">map</span>(<span class="op">|</span><span class="ident">md</span><span class="op">|</span> <span class="ident">md</span>.<span class="ident">dev</span>())
}

 <span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">windows</span>)]</span>
<span class="kw">fn</span> <span class="ident">device_num</span><span class="op">&lt;</span><span class="ident">P</span>: <span class="ident">AsRef</span><span class="op">&lt;</span><span class="ident">Path</span><span class="op">&gt;&gt;</span>(<span class="ident">path</span>: <span class="ident">P</span>) <span class="op">-&gt;</span> <span class="ident">std</span>::<span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span> {
    <span class="kw">use</span> <span class="ident">winapi_util</span>::{<span class="ident">Handle</span>, <span class="ident">file</span>};

    <span class="kw">let</span> <span class="ident">h</span> <span class="op">=</span> <span class="ident">Handle</span>::<span class="ident">from_path_any</span>(<span class="ident">path</span>)<span class="question-mark">?</span>;
    <span class="ident">file</span>::<span class="ident">information</span>(<span class="ident">h</span>).<span class="ident">map</span>(<span class="op">|</span><span class="ident">info</span><span class="op">|</span> <span class="ident">info</span>.<span class="ident">volume_serial_number</span>())
}

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">any</span>(<span class="ident">unix</span>, <span class="ident">windows</span>)))]</span>
<span class="kw">fn</span> <span class="ident">device_num</span><span class="op">&lt;</span><span class="ident">P</span>: <span class="ident">AsRef</span><span class="op">&lt;</span><span class="ident">Path</span><span class="op">&gt;&gt;</span>(<span class="kw">_</span>: <span class="ident">P</span>)<span class="op">-&gt;</span> <span class="ident">std</span>::<span class="ident">io</span>::<span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span> {
    <span class="prelude-val">Err</span>(<span class="ident">io</span>::<span class="ident">Error</span>::<span class="ident">new</span>(
        <span class="ident">io</span>::<span class="ident">ErrorKind</span>::<span class="ident">Other</span>,
        <span class="string">&quot;walkdir: same_file_system option not supported on this platform&quot;</span>,
    ))
}
</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../";window.currentCrate = "walkdir";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script src="../../source-script.js"></script><script src="../../source-files.js"></script><script defer src="../../search-index.js"></script></body></html>